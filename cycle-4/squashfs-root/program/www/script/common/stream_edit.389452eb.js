Config.StreamEdit=function(o){var e={Src:{StreamID:""},Dest:{Address:"",Port:""},TransMode:"",IsReservedAfterReboot:""},t={StreamID:0,IPAddr:"",Port:5e3,TransMode:0,Reserved:0},a=null,i=Capinfo.maxStreamNum;return new(Class.extend({init:function(){Utils.beforeDataLoad(),this.initPage(),Utils.initLang(),this.initValidator(),document.frmSetup1.reset(),Utils.strLimit(),Utils.afterDataLoad()},initPage:function(){var e,t=Capinfo.isSupportFishEye?'<option value="10" lang="roleVideoStream" selected="selected"></option><option value="11" lang="streamID7"></option><option value="12" lang="streamID3"></option><option value="13" lang="streamID4"></option><option value="14" lang="streamID5"></option><option value="15" lang="streamID6"></option>':1==i?'<option value="0" lang="mainVideoStream" selected="selected"></option>':2==i?'<option value="0" lang="mainVideoStream" selected="selected"></option><option value="1" lang="roleVideoStream"></option>':8==Capinfo.maxStreamNum?'<option value="0" lang="mainVideoStream" selected="selected"></option><option value="1" lang="roleVideoStream"></option><option value="2" lang="thirdVideoStream"></option><option value="3" lang="streamID3"></option><option value="4" lang="streamID4"></option><option value="5" lang="streamID5"></option><option value="6" lang="streamID6"></option><option value="7" lang="fishEyeMode1"></option>':'<option value="0" lang="mainVideoStream" selected="selected"></option><option value="1" lang="roleVideoStream"></option><option value="2" lang="thirdVideoStream"></option>';for(o("#StreamID").append(t),e=0;e<Config.OperateStream.streamList.length;e++)o("#StreamID option[value="+Config.OperateStream.streamList[e]+"]").remove()},initData:function(){},initEvent:function(){},submitF:function(){},release:function(){delete Config.StreamEdit},initValidator:function(){o("#IPAddr").attr("tip",o.lang.tip.tipIPInfo),o("#Port").attr("tip",o.validator.format(o.lang.tip.tipIntRange,1,65535)),o.validator.addMethod("checkIPAddress",function(e){return Utils.isIPAddress(e)&&(Utils.checkIP1To223(e)||Utils.checkIP224To239(e))},o.lang.tip.tipIPErr),(a=o("#frmSetup1").validate({focusInvalid:!1,errorElement:"span",errorPlacement:function(e,t){Utils.showJqueryErr(e,t,"div","frmSetup1")},success:function(){},rules:{IPAddr:{required:!0,checkIPAddress:""},Port:{integer:!0,required:!0,range:[1,65535]}}})).init()},callback:function(e){var t=ResultCode.RESULT_CODE_SUCCEED==e;t?(Config.OperateStream.dataView.refresh(),Config.OperateStream.setStyle(),Utils.closeWin()):XPErrorResult.VIDEO_STREAM_FULL==e?Frame.showMsg(t,o.lang.tip.tipAddStreamFull):Frame.showMsg(t,o.lang.tip.tipAddStreamFailed)},submitWinData:function(){a.form()&&(Utils.LAPI_FormToCfg("frmSetup1",e,t,Config.OperateStream.mappingMap),e.TransMode=11==e.TransMode?0:e.TransMode,Utils.LAPI_CreateCfgData(LAPI_URL.STREAM_CFG+e.Src.StreamID+"/Streamings",e,!1,this.callback))}}))}(jQuery),Frame.openWinNameSpace=Config.StreamEdit;