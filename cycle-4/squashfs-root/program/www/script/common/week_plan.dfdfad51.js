Utils.$package("weekPlan"),weekPlan=function(r){var o=0,c=PLANNUM,s=r.lang.tip.tipTimeOverlap,d=[r.lang.pub.Monday,r.lang.pub.Tuesday,r.lang.pub.Wednesday,r.lang.pub.Thursday,r.lang.pub.Friday,r.lang.pub.Saturday,r.lang.pub.Sunday];return new(Class.extend({init:function(){Utils.beforeDataLoad(),Utils.initLang(),this.initEvent(),this.initData(),Utils.strLimit()},initEvent:function(){var e=this;r("#selectAll").bind("click",function(){e.selectAll()}),r("#copy").bind("click",function(){e.doPasteToWeek()}),r("input[class='Wdate']").bind("focus",function(){Utils.pickerTime()})},initData:function(){return o=0,this.planToForm(),r("a[class='selected']").removeClass("selected"),r("#monday").addClass("selected"),!0},release:function(){},doPasteToWeek:function(){var e;if(this.ValidTimeRange())for(this.formToPlan(),e=0;e<7;e++)r("#checkbox"+e).is(":checked")&&e!=o&&Plan.cloneDayData(o,e)},selectAll:function(){var e;if(r("#selectAll").is(":checked"))for(e=0;e<7;e++)o!=e&&r("#checkbox"+e).prop("checked",!0);else for(e=0;e<7;e++)o!=e&&r("#checkbox"+e).prop("checked",!1)},toggle:function(e,a){if(this.ValidTimeRange()){this.formToPlan(),r("li.selected").removeClass("selected"),r(e).addClass("selected"),o=a,this.planToForm(),r("#selectAll").prop("checked",!1);for(var t=0;t<7;t++){var n=r("#checkbox"+t);n.prop("checked",o==t),n.prop("disabled",o==t)}}},submitWinData:function(){this.ValidTimeRange()&&(this.formToPlan(),Plan.redraw(),Utils.closeWin())},formToPlan:function(){for(var e=PlanDataList[o],a={},t=0,n=e.length;t<n;t++)(a=e[t]).PlanStartTime=r("#StartTime"+(t+1)).val(),a.PlanEndTime=r("#EndTime"+(t+1)).val();Plan.repareData(PlanDataList[o])},planToForm:function(){for(var e,a=PlanDataList[o],t=0,n=a.length;t<n;t++)e=a[t],r("#StartTime"+(t+1)).val(e.PlanStartTime),r("#EndTime"+(t+1)).val(e.PlanEndTime)},ValidTimeRange:function(){for(var e=[],a=[],t=0;t<c;t++)if(e[t]=r("#StartTime"+(t+1)).val(),a[t]=r("#EndTime"+(t+1)).val(),!(""==e[t]&&""==a[t]||"00:00:00"==e[t]&&"00:00:00"==a[t])){if(""==e[t]||""==a[t])return alert(r.lang.tip.tipTimeFormatErr1.replace("%s",d[o])),!1;if(e[t]>=a[t])return alert(r.lang.tip.tipTimeFormatErrStartEnd.replace("%s",d[o])),!1}for(t=0;t<c;t++)if(!(""==e[t]&&""==a[t]||"00:00:00"==e[t]&&"00:00:00"==a[t]))for(var n=1;t+n<c;n++){var i=e[t+n],l=a[t+n];if(!(""==i&&""==l||"00:00:00"==i&&"00:00:00"==l)&&(e[t]>=i&&e[t]<l||i>=e[t]&&i<a[t]))return alert(s.replace("%s",d[o])),!1}return!0}}))}(jQuery),Frame.openWinNameSpace=weekPlan;