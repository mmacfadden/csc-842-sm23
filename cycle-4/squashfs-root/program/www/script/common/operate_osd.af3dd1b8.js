function Release(){Config.OperateOsd.release(),delete Config.OperateOsd}Config.OperateOsd=function(h){var r,l=[],p=0,v=null,s=0,f=Capinfo.infoOSDLine,u=Capinfo.infoOSDNum,o=Capinfo.osdColorList,g=Capinfo.osdTypeList,c=g,m=f==u&&VersionType.IN==Capinfo.versionType,I={},C={},O=[],b={},y=[],F=18,T=20,S=21,a={},L={},D={},P={FontStyle:["OSDStyleBase","FontStyle"],FontSize:["OSDStyleBase","FontSize"],DateFormat:["OSDStyleBase","DateFormat"],TimeFormat:["OSDStyleBase","TimeFormat"],Margin:["OSDStyleExtend","Margin"],Color:["OSDStyleBase","Color"]},_={},A={},E={},w={},V={},U={MarqueeTxt:["Value"]},x=LAPI_URL.OSD,M=["",h.lang.pub.custom,h.lang.pub.datetime,"",h.lang.pub.PTZpos,"",h.lang.pub.zoom,h.lang.pub.cruisePresetPos,h.lang.pub.alarm,"",h.lang.pub.serialMsg,h.lang.pub.ptzDirectionMsg,"","",h.lang.pub.personCount,h.lang.pub.networkMsg,h.lang.pub.time,h.lang.pub.date,h.lang.pub.ISinfo,h.lang.pub.batteryStatus,h.lang.pub.RollOsd,h.lang.pub.logoMsg,h.lang.pub.vehicleFlow,h.lang.pub.isNotVehicleFlow,h.lang.pub.runningManFlow,h.lang.pub.sceneName],N={},R={};return new(Class.extend({init:function(){var e=this;Utils.beforeDataLoad(),this.initPage(),Utils.initLang(),this.initEvent(),this.initData(),Utils.initVideo("recordManager_div_activeX",StreamType.LIVE,RunMode.CONFIG,null,Capinfo.isSupportPTZ,function(){e.initVideo_callback()}),Utils.afterDataLoad()},initPage:function(){Video.sdk_viewer&&Video.sdk_viewer.isInstalled&&h("#importFileName").remove(),Capinfo.isSupportFishEye&&h("#FishEyeVideoModeDiv").removeClass("hidden"),this.isContain(o,0)&&h("#FontColorDiv").removeClass("hidden"),Capinfo.isSupport4KFishEye&&(PlayPtzMode.PLAYER_FISH_LEFT_4PTZ==Variables.PlayMode?(h("#FishEyeVideoModeDiv").removeClass("hidden"),h("#FishEyePanoramaModeDiv").remove()):LensPlayMode.PLAYER_PANORAMA==Variables.PlayMode&&(h("#FishEyeVideoModeDiv").remove(),h("#FishEyePanoramaModeDiv").removeClass("hidden"))),Capinfo.isSupportSpecialLensType&&h("#osdPosWayBox").removeClass("hidden"),Utils.resetVideoSize(Frame.DefaultStreamID,"recordManager_div_activeX"),2==Utils.getCfg("style")&&h(".operate_osd").css("backgroundColor","#f1f2f3"),iColorPicker(),m?(h("#infoOsd_8").removeClass("hidden"),h("#infoOsd_3").remove(),h("#areaPosPoint").remove()):(h("#infoOsd_8").remove(),h("#infoOsd_3").removeClass("hidden"),h("#moveBtnDiv").removeClass("hidden")),0<Capinfo.marginArr.length&&""!=Capinfo.marginArr[0]&&(Utils.parseCapOptions("Margin",Capinfo.marginArr,"mode"),h("#MarginLI").removeClass("hidden")),Capinfo.isSupportFontStyle&&(Utils.parseCapOptions("FontStyle",Capinfo.osdFontStyleArr,"mode"),h("#FontStyleLI").removeClass("hidden")),Utils.parseCapOptions("FontSize",Capinfo.osdFontSizeArr,"mode");for(var e=0,t=g.length;e<t;e++)if(11==g[e]){h("#orientationField").removeClass("hidden");break}for(this.changeOptionForLanguage(),e=0;e<Capinfo.infoOSDNum;e++)E["InfoLeft"+e]=["InfoOSD",e,"Area","TopLeft","X"],E["InfoTop"+e]=["InfoOSD",e,"Area","TopLeft","Y"],E["InfoEnable"+e]=["InfoOSD",e,"Enable"],P["FontAlign"+e]=["OSDStyleExtend","FontAlign",e]},initData:function(){var e,t,o=parseInt(h("#FishEyeVideoMode").val()),a=0,i=0;if(C={},I={},r={},Capinfo.isSupport4KFishEye&&LensPlayMode.PLAYER_ORIGINAL!=Variables.PlayMode&&(g=1!=(p=o)?[1,2]:c),x=LAPI_URL.OSD+"/"+p,Utils.LAPI_GetCfgData(x,_)&&Utils.LAPI_GetCfgData(LAPI_URL.OSDStyleCfg,L)){if(-1<Utils.isContainsElement(F,g)){if(!Utils.LAPI_GetCfgData(LAPI_URL.IsStatus,b))return void Utils.disableAll();O=b.SensorInfo}if(-1<Utils.isContainsElement(T,g)){if(!Utils.LAPI_GetCfgData(LAPI_URL.Marquee,w))return void Utils.disableAll();V=Utils.objectClone(w),Utils.LAPI_CfgToForm("frmSetup",w,r,U)}for(A=Utils.objectClone(_),D=Utils.objectClone(L),l=0,e=_.AreaNum;l<e;l++)if(0!=_.InfoOSD[l].Enable)for(a=0,t=_.InfoOSD[l].InfoParam.length;a<t;a++)0!=_.InfoOSD[l].InfoParam[a].InfoType&&(I["Field"+i]=l+1,I["InfoType"+i]=_.InfoOSD[l].InfoParam[a].InfoType,I["Value"+i]=_.InfoOSD[l].InfoParam[a].Value,i++);else m&&i++;this.changeMapToList(),this.initOsdInfoTable();for(var n=Number(L.OSDStyleBase.Color).toString(16),l=n.length;l<6;l++)n="0"+n;C.FontColor="#"+n,h("#FontColor").css("background",C.FontColor),Utils.LAPI_CfgToForm("frmSetup",_,I,E),Utils.LAPI_CfgToForm("frmSetup",L,C,P);for(l=0;l<f;l++){var s=h("#InfoType"+l+" option:selected").text(),d=h("#InfoType"+l);1!=d.val()&&F!=d.val()&&S!=d.val()?h("#Value"+l).val(s):s=h("#Value"+l).val(),F==d.val()&&h("#ISInfoType"+l).val(s),S==d.val()?(h("#logoOpacity"+l).val(s),h("#osdInfoLabel"+l).text(h.lang.pub.logoOpacity+s)):h("#osdInfoLabel"+l).text(s),h("#osdAreaLabel"+l).text(h("#Field"+l+" option:selected").text())}Utils.LAPI_GetCfgData(LAPI_URL.OsdPosSet,N)?(Utils.LAPI_CfgToForm("frmSetup",N),R=Utils.objectClone(N)):Utils.disableAll()}else Utils.disableAll()},initEvent:function(){var t=this;h("#FontAlign").change(function(){C["FontAlign"+(s-1)]=h("#FontAlign").val(),t.submitF_OsdStyle()}),h("#InfoLeft").change(function(){t.onChangeInfoOsdPos(s-1,this)}),h("#InfoTop").change(function(){t.onChangeInfoOsdPos(s-1,this)}),h("#MarqueeTxt").change(function(){t.submitF_RollInfoOsd(s-1,this)}),h("#FishEyeVideoMode").bind("change",function(){t.changeOSDChannel()}),h("#FontStyle").change(function(){t.submitF_OsdStyle()}),h("#FontSize").change(function(){t.submitF_OsdStyle()}),h("#FontColor").change(function(){var e=(e=h("#FontColor").val()).replace("#","0x");h("#Color").val(Number(e)),t.submitF_OsdStyle()}),h("#Margin").change(function(){t.submitF_OsdStyle()}),h("#DateFormat").change(function(){t.submitF_OsdStyle()}),h("#TimeFormat").change(function(){t.submitF_OsdStyle()}),h("#orient").bind("click",function(){var e=h("#ptzDirection").val();""!=e&&(a.Direction=Number(e),Utils.LAPI_SetCfgData(LAPI_URL.Orientation,a))}),h("#importFileName").bind("change",function(){t.chooseFileText(this)}),Video.sdk_viewer&&Video.sdk_viewer.isInstalled&&h("#updateBrowser").bind("click",function(){if(!Utils.chooseFileAbsPath("importFile","*.bmp;*.png")||""!=h("#importFile").val()){var e=h("#importFile").val();if(!e.match(/.bmp/i)&&!e.match(/.png/i))return h("#importFile").val(""),h("#importBtn").prop("disabled",!0),this.showResult("exportStatusDiv",!1,h.lang.tip.tipLogoUploadFailed),void alert(h.lang.tip.tipFileType);h("#importBtn").prop("disabled",!1)}}),h("#importBtn").bind("click",function(){t.importCfg()}),h("#Mode").bind("change",t.submit_OsdPosSet)},submitF:function(){},release:function(){Utils.EnableDrawFun(StreamType.LIVE,0),Frame.hiddenVideo(),Frame.currentNameSpace=null},submit_OsdPosSet:function(){Utils.LAPI_FormToCfg("frmSetup",N),!Utils.isObjectEquals(N,R)?Utils.LAPI_SetCfgData(LAPI_URL.OsdPosSet,N)&&(R=Utils.objectClone(N)):parent.status=h.lang.tip.tipAnyChangeInfo},changeValues:function(e){var t=h("#osdInfoLabel"+v),o=t.text(),a=h("#Value"+v),i=a.val(),n=h("#ISInfoType"+v),l=n.val(),s=h("#InfoType"+v),d=s.val(),r=h("#osdAreaLabel"+v),p=r.text(),f=h("#Field"+v),u=f.val(),g=h("#status"+v),c=g.attr("class"),m=h("#osdInfoLabel"+e);t.text(m.text());t=h("#Value"+e);a.val(t.val());a=h("#InfoType"+e);s.val(a.val());s=h("#ISInfoType"+e);n.val(s.val());n=h("#osdAreaLabel"+e);r.text(n.text());r=h("#Field"+e);f.val(r.val());f=h("#status"+e);g.attr("class",f.attr("class")),m.text(o),t.val(i),a.val(d),s.val(l),n.text(p),r.val(u),f.attr("class",c);u=y[v].Field,f=y[v].InfoType,c=y[v].Value;y[v].Field=y[e].Field,y[v].InfoType=y[e].InfoType,y[v].Value=y[e].Value,y[e].Field=u,y[e].InfoType=f,y[e].Value=c,this.selectInfoOsd(e),this.submitF_InfoOsd()},changeStyleForInfoType:function(e){var t=h("#InfoType"+e),o=t.val();o==F?(h("#Value"+e).addClass("hidden"),h("#ISInfoType"+e).removeClass("hidden"),h("#logoText"+e).addClass("hidden"),h("#logoOpacity"+e).addClass("hidden"),h("#MarqueeContent").addClass("hidden"),t.css("width","50%")):S==o?(h("#Value"+e).addClass("hidden"),h("#logoText"+e).removeClass("hidden"),h("#logoOpacity"+e).removeClass("hidden"),h("#ISInfoType"+e).addClass("hidden"),h("#MarqueeContent").addClass("hidden"),t.css("width","50%")):(T==o?(h("#Value"+e).removeClass("hidden"),h("#MarqueeContent").removeClass("hidden")):(h("#Value"+e).removeClass("hidden"),h("#MarqueeContent").addClass("hidden")),h("#ISInfoType"+e).addClass("hidden"),h("#logoText"+e).addClass("hidden"),h("#logoOpacity"+e).addClass("hidden"),t.css("width","100%"))},selectInfoType:function(e){var t=h("#InfoType"+e).val(),o=h("#Field"+e).val(),a=1!=t,i="";h("#logoOpacity"+e);if(15==t){if(!confirm(h.lang.tip.tipOpenOSDSafe))return void h("#InfoType"+e).val(l[0])}else l[0]=t;i=t==F?h("#ISInfoType"+e+" option:selected").text():t==S?h("#logoOpacity"+e).val():h("#InfoType"+e+" option:selected").text(),this.changeStyleForInfoType(e);var i=a?i:"",n=h("#Value"+e);n.val(i),(S==t?h("#logoOpacity"+e):n).focus(),n.attr("isChanged",a?0:1),m?(o=h("#InfoEnable"+e).is(":checked"),a&&o&&(y[e].InfoType=t,y[e].Field=e+1,S==t&&(y[e].Value=i),this.submitF_InfoOsd(null,e))):a&&0!=o&&(h("#status"+e).addClass("checked"),t!=F&&t!=S||(y[e].Value=i),y[e].InfoType=t,y[e].Field=o,this.submitF_InfoOsd(null,e))},selectISInfoType:function(e){var t=h("#ISInfoType"+e+" option:selected").text(),o=h("#Value"+e);t!=o.val()&&(o.val(t),y[e].Value=t,this.submitF_InfoOsd(null,e))},editOsdInfo:function(e){this.showHiddenEditImg(!1,"editImg_info",e);var t,o,a=h("#Value"+e);a.is(":visible")||((t=h("#ISInfoType"+e)).is(":visible")||((o=h("#logoOpacity"+e)).is(":visible")||(h("#osdInfoLabel"+e).addClass("hidden"),h("#osdInfoDiv"+e).removeClass("hidden"),this.changeStyleForInfoType(e),1==a.is(":visible")?a.focus():F==Number(h("#InfoType"+e).val())?t.focus():S==Number(h("#InfoType"+e).val())&&o.focus())))},logoOpacityChange:function(e){var t,o,a=h("#logoOpacity"+e);Utils.validNumber(a[0],0,100,h.lang.tip.tipNumScopeErr.replace("%s","0~100"))?(t=a.val())!=(o=h("#Value"+e)).val()&&(o.val(t),y[e].Value=t,this.submitF_InfoOsd(null,e)):a.val(h("#Value"+e).val())},hiddenOsdInfo:function(o){timer=setTimeout(function(){var e,t=document.activeElement.id;"InfoType"+o!=t&&"ISInfoType"+o!=t&&"Value"+o!=t&&"logoOpacity"+o!=t&&(1==(e=h("#Value"+o)).attr("isChanged")&&""==e.val()&&e.change(),t=h("#osdInfoLabel"+o),S==Number(h("#InfoType"+o).val())?t.text(h("#logoText"+o).text()+e.val()):t.text(e.val()),t.removeClass("hidden"),h("#osdInfoDiv"+o).addClass("hidden"))},1)},editOsdArea:function(e){this.showHiddenEditImg(!1,"editImg_field",e),h("#osdAreaLabel"+e).addClass("hidden");e=h("#Field"+e);e.removeClass("hidden"),e.focus()},hiddenOsdArea:function(e){var t=h("#Field"+e+" option:selected").text(),o=h("#osdAreaLabel"+e);o.text(t),h("#Field"+e).addClass("hidden"),o.removeClass("hidden")},selectInfoOsd:function(e){null!=v&&h("#infoTR"+v).removeClass("selectedTR"),h("#infoTR"+(v=e)).addClass("selectedTR");var t=h("#InfoType"+e).val();m?(S==t||T==t?(h("#areaPosField").removeClass("hidden"),S==t?(h("#importLogoDiv").removeClass("hidden"),h("#MarqueeContent").addClass("hidden")):(h("#MarqueeContent").removeClass("hidden"),h("#MarqueeTxt").val(V.Value),h("#MarqueeTxt").removeClass("MarqueeTxtError"),h("#importLogoDiv").addClass("hidden"))):h("#areaPosField").addClass("hidden"),s=e+1):0==(s=Number(h("#Field"+e).val()))?h("#areaPosField").addClass("hidden"):(h("#areaPos").text(h.lang.pub.areaPos+s),h("#InfoLeft").val(I["InfoLeft"+(s-1)]),h("#InfoTop").val(I["InfoTop"+(s-1)]),h("#FontAlign").val(C["FontAlign"+(s-1)]),h("#areaPosField").removeClass("hidden"),h("#areaPosPoint").removeClass("hidden"),S==t?h("#importLogoDiv").removeClass("hidden"):h("#importLogoDiv").addClass("hidden"),T==t?(h("#MarqueeContent").removeClass("hidden"),h("#MarqueeTxt").val(V.Value),h("#MarqueeTxt").removeClass("MarqueeTxtError")):h("#MarqueeContent").addClass("hidden"))},getFileProcessResult:function(){1==Video.FileProcessResult?this.importCfg_callback(0):2==Video.FileProcessResult?this.importCfg_callback(1):setTimeout(function(){Config.OperateOsd.getFileProcessResult()},300)},importCfg:function(){if(Video.sdk_viewer&&Video.sdk_viewer.isInstalled)Video.FileProcessResult=0,Video.NetSDKUploadFile(Video,Frame.loginServerIp,Number(Frame.httpPort),Frame.loginUserName,Frame.loginUserPwd,Frame.auzType,LAPI_URL.ImportFile,h("#importFile").val(),1),this.getFileProcessResult();else{if(undefined==window.FormData)return alert(h.lang.tip.tipInstallPluginInfo),!1;var e=new FormData;e.append("file",h("#importFileName")[0].files[0]),Utils.LAPI_UploadFile(LAPI_URL.ImportFile,e,Config.OperateOsd.importCfg_callback)}},importCfg_callback:function(e){e==ResultCode.RESULT_CODE_SUCCEED?Config.OperateOsd.showResult("exportStatusDiv",!0,h.lang.tip.tipLogoUploaded):Config.OperateOsd.showResult("exportStatusDiv",!1,h.lang.tip.tipLogoUploadFailed)},showResult:function(e,t,o){t?h("#"+e+" a").removeClass("fail").addClass("success"):h("#"+e+" a").removeClass("success").addClass("fail"),h("#"+e+" span").text(o),h("#"+e).removeClass("hidden")},toUp:function(e){document.getElementById(e);null!=v&&0!=v&&(0==h("#Field"+v).val()&&1==h("#InfoType"+v).val()&&""==h("#Value"+v).val()||this.changeValues(v-1))},toDown:function(e){e=document.getElementById(e);null!=v&&v!=e.rows.length-1&&(0==document.getElementById("Field"+v).value||this.changeValues(v+1))},showHiddenEditImg:function(e,t,o){"editImg_info"==t&&h("#osdInfoLabel"+o).is(":hidden")||"editImg_field"==t&&h("#osdAreaLabel"+o).is(":hidden")||(e?h("#"+t+o).removeClass("hidden"):h("#"+t+o).addClass("hidden"))},validNameContent:function(e){return e.length<=30},osdInfoChange:function(e){var t=h("#InfoType"+e);t.val(1);var o=h("#Value"+e);o.attr("isChanged",0);var a=h("#Field"+e),i=a.val(),n=o.val(),o=0!=i;if(m&&(i=a.text(),o=h("#InfoEnable"+e).is(":checked")),n.length<=30){if(o){if(""==n){if(h("#status"+e).removeClass("checked"),undefined==y[e].Field)return;y[e]={}}else h("#status"+e).addClass("checked"),y[e].Value=n,y[e].Field=i,y[e].InfoType=t.val();this.submitF_InfoOsd(null,e)}}else h("#status"+e).removeClass("checked"),alert(h.lang.tip.inputErr+h.lang.tip.tipOSDInfoName)},osdAreaChange:function(e){var t,o=h("#Value"+e).val(),a="",i=h("#InfoType"+e).val(),n=!1,n=m?(t=h("#InfoEnable"+e).is(":checked")?1:0,a=h("#Field"+e).text(),I["InfoEnable"+e]=t,y[e].Enable=t,this.showAllArea(),0==t):0==(a=h("#Field"+e).val());if(""!=o){if(n){if(h("#status"+e).removeClass("checked"),undefined==y[e].Field)return;y[e]={}}else{if(1==i&&!this.validNameContent(o))return;h("#status"+e).addClass("checked"),1!=(y[e].InfoType=i)&&S!=i||(y[e].Value=o),y[e].Field=a}this.submitF_InfoOsd(null,e)}},isContain:function(e,t){for(var o=0,a=e.length;o<a;o++)if(t==e[o])return!0;return!1},getSubmitInfoOsd:function(){Utils.LAPI_FormToCfg("frmSetup",_,I,E);for(var e=0;e<u;e++)for(var t=_.InfoOSD[e].Enable=0;t<f;t++)_.InfoOSD[e].InfoParam[t].InfoType=0,_.InfoOSD[e].InfoParam[t].Value="";for(var o="",a={},i=1;i<=u;i++)a["Area"+i+"Num"]=0;for(var n,l=0;l<f;l++){var s=y[l];if(undefined!=s.Field){for(var d in o.indexOf("InfoEnable"+(s.Field-1))<0||a["Area"+s.Field+"Num"]++,s){var r;"Field"!=d?(n=a["Area"+s.Field+"Num"],_.InfoOSD[s.Field-1].InfoParam[n][d]=s[d]+""):(r="InfoEnable"+(s[d]-1),o.indexOf(r)<0&&(o+=r+"=1&",_.InfoOSD[s[d]-1].Enable=1))}0}}},submitF_InfoOsd:function(e,t){this.getSubmitInfoOsd(),undefined!=e&&(_.InfoOSD[t].Area.TopLeft.X=parseInt(e.split("&")[0].split("=")[1]),_.InfoOSD[t].Area.TopLeft.Y=parseInt(e.split("&")[1].split("=")[1])),!Utils.isObjectEquals(_,A)&&Utils.LAPI_SetCfgData(x,_)&&(A=Utils.objectClone(_))},submitF_RollInfoOsd:function(e){(m?0==(h("#InfoEnable"+e).is(":checked")?1:0):0==Number(h("#osdAreaLabel"+e).text()))||(this.isValidRollData()?(w.Value=h("#MarqueeTxt").val(),!Utils.isObjectEquals(w,V)&&Utils.LAPI_SetCfgData(LAPI_URL.Marquee,w)&&(V=Utils.objectClone(w))):Frame.showMsg(!1))},submitF_OsdStyle:function(){Utils.LAPI_FormToCfg("frmSetup",L,C,P),!Utils.isObjectEquals(L,D)&&Utils.LAPI_SetCfgData(LAPI_URL.OSDStyleCfg,L)&&(D=Utils.objectClone(L))},onChangeInfoOsdPos:function(e,t){var o=this,a=m?e:"";if(!Utils.validNumber(t,0,99,h.lang.tip.tipNumScopeErr.replace("%s","0~99")))return h("#InfoLeft").val(I["InfoLeft"+(s-1)]),void h("#InfoTop").val(I["InfoTop"+(s-1)]);var i=h("#InfoLeft"+a),n=Number(i.val()),l=h("#InfoTop"+a),t=Number(l.val()),a=DrawObjMap[DrawType.TITLE][e],n=isNaN(n)?0:n,t=isNaN(t)?0:t;n<RimRect.MIN_WIDTH&&(n=RimRect.MIN_WIDTH),t<RimRect.MIN_HEIGHT&&(t=RimRect.MIN_HEIGHT),I["InfoLeft"+e]=n,I["InfoTop"+e]=t,i.val(n),l.val(t),this.submitF_InfoOsd("InfoLeft"+e+"="+n+"&InfoTop"+e+"="+t,e),a.Left=100*n,a.Top=100*t,isOldPlugin&&!Capinfo.isMac?Utils.setDrawObj(DrawType.TITLE,e,DrawObjMap):Utils.ModifyDrawObj(DrawType.TITLE,e,DrawObjMap),Utils.initDrawObj(DrawObjMap,function(){o.showAllArea()})},changeMapToList:function(){y=[];for(var e=0;e<f;e++){var t={};undefined!=I["Field"+e]&&(t.Field=I["Field"+e],t.Value=I["Value"+e],t.InfoType=I["InfoType"+e]),y.push(t)}},chooseFileText:function(e){e=e.value;if(""!=e){if(!e.match(/.bmp/i)&&!e.match(/.png/i))return h("#importFile").val(""),h("#importBtn").prop("disabled",!0),h("#importFileName").val(""),this.showResult("exportStatusDiv",!1,h.lang.tip.tipLogoUploadFailed),void alert(h.lang.tip.tipFileType);h("#importFile").val(e),h("#importBtn").prop("disabled",!1)}},eventDrawObjParam:function(e,t,o){var a,i={},n=DrawObjMap[Number(e)][Number(t)];for(a in isOldPlugin&&!Capinfo.isMac?Utils.sdkAddCfg(i,o):i=h.parseJSON(o),i)n[a]=Number(i[a]);e=Math.round(n.Left/100),o=Math.round(n.Top/100),I["InfoLeft"+t]=e,I["InfoTop"+t]=o,m?(h("#InfoLeft"+t).val(e),h("#InfoTop"+t).val(o)):t==s-1&&(h("#InfoLeft").val(e),h("#InfoTop").val(o)),this.submitF_InfoOsd("InfoLeft"+t+"="+e+"&InfoTop"+t+"="+o,t)},eventSelDrawObj:function(e,t){Utils.selectDrawObj(e,t)},onCruiseStatus:function(e){e=Number(e.PTZStatus.Status);PTZ_STATE_CRUISE.ECOMPASS_START==e?Frame.updateBlock(!0,h.lang.tip.tipOrienting):PTZ_STATE_CRUISE.IDLE==e&&Frame.updateBlock(!1)},changeOptionForLanguage:function(){var e="",t=h("#ptzDirection"),o=h("#DateFormat");LANG_TYPE.Chinese==top.language?(t.empty(),e="<option value='' lang='pleaseSelect'></option>",Capinfo.isSupportEleCompass&&(e+="<option value='8' lang='automatic'></option>"),t.append(e+="<option value='0' lang='east'></option><option value='2' lang='south'></option><option value='4' lang='west'></option><option value='6' lang='north'></option><option value='1' lang='southeast'></option><option value='7' lang='northeast'></option><option value='3' lang='southwest'></option><option value='5' lang='northwest'></option>"),o.empty(),o.append(e="<option value='0' lang='dateFormat0'></option><option value='1' lang='dateFormat1'></option><option value='2' lang='dateFormat2'></option><option value='3' lang='dateFormat3'></option><option value='4' lang='dateFormat4'></option><option value='5' lang='dateFormat5'></option>")):(t.empty(),e="<option value='' lang='pleaseSelect'></option>",Capinfo.isSupportEleCompass&&(e+="<option value='264' lang='automatic'></option>"),t.append(e+="<option value='256' lang='east'></option><option value='258' lang='south'></option><option value='260' lang='west'></option><option value='262' lang='north'></option><option value='257' lang='southeast'></option><option value='263' lang='northeast'></option><option value='259' lang='southwest'></option><option value='261' lang='northwest'></option>"),o.empty(),o.append(e="<option value='256' lang='dateFormat256'></option><option value='257' lang='dateFormat257'></option><option value='258' lang='dateFormat258'></option><option value='259' lang='dateFormat259'></option><option value='260' lang='dateFormat260'></option><option value='261' lang='dateFormat261'></option><option value='262' lang='dateFormat262'></option><option value='263' lang='dateFormat263'></option><option value='264' lang='dateFormat264'></option>"))},initOsdInfoTable:function(){for(var e="",t="",o=0,a=g.length;o<a;o++){var i=g[o];e+="<option value='"+i+"'>&lt"+M[i]+"&gt</option>"}for(var n="",l=0,a=O.length;l<a;l++){var s=O[l];n+="<option value='"+s.Identify+"'>"+s.Identify+"</option>"}var d=h("#osdInfoTable");d.empty();for(l=1;l<=u;l++)t+="<option value='"+l+"'>"+h.lang.pub.area+l+"</option>";for(l=0;l<f;l++){var r=I["Field"+l]?" checked":"",p="",p=m?"<tr id='infoTR"+l+"' onclick='Config.OperateOsd.selectInfoOsd("+l+")'> <td><input type='checkbox' id='InfoEnable"+l+"' onclick='Config.OperateOsd.osdAreaChange("+l+")'></td><td id='Field"+l+"'>"+(l+1)+"</td><td onclick='Config.OperateOsd.editOsdInfo("+l+")' onmouseover='Config.OperateOsd.showHiddenEditImg(true, \"editImg_info\", "+l+")' onmouseout='Config.OperateOsd.showHiddenEditImg(false, \"editImg_info\", "+l+")'><a class='flagSpan"+r+" right' id='status"+l+"'> </a><a id='editImg_info"+l+"' class='icon black-edit right hidden'></a><label id='osdInfoLabel"+l+"' style='float: left;width:80%'></label><div id='osdInfoDiv"+l+"' class='hidden' style='position:relative;overflow:hidden;'><div style='position: absolute;left: 0; right: 20px;'><input type='text' isChanged='0' name='Value"+l+"' id='Value"+l+"' maxlength='20' style='width: 100%;' onchange='Config.OperateOsd.osdInfoChange("+l+")' onblur='Config.OperateOsd.hiddenOsdInfo("+l+")'></div><select name='InfoType"+l+"' id='InfoType"+l+"' style='width: 100%' onchange='Config.OperateOsd.selectInfoType("+l+")' onblur='Config.OperateOsd.hiddenOsdInfo("+l+")'>"+e+"</select><label id='logoText"+l+"' style='width: 25%;text-align: right;' title='"+h.lang.pub.logoOpacity+"' class='strLimit hidden'>"+h.lang.pub.logoOpacity+"</label><input type='text' id='logoOpacity"+l+"' name='logoOpacity"+l+"' class='hidden' value='0' style='width: 20%' onchange='Config.OperateOsd.logoOpacityChange("+l+",this)' onkeypress='onPicKeyPress(this);' onblur='Config.OperateOsd.hiddenOsdInfo("+l+");'></div></td><td><input type='text' id='InfoLeft"+l+"' class='infoText' maxlength='2' onchange = 'Config.OperateOsd.onChangeInfoOsdPos("+l+", this)' onKeyPress='onPicKeyPress(this);'/></td><td><input type='text' id='InfoTop"+l+"' class='infoText' maxlength='2' onchange = 'Config.OperateOsd.onChangeInfoOsdPos("+l+", this)' onKeyPress='onPicKeyPress(this);'/></td></tr>":"<tr id='infoTR"+l+"' onclick='Config.OperateOsd.selectInfoOsd("+l+")'> <td>"+(l+1)+"</td><td onclick='Config.OperateOsd.editOsdArea("+l+")' onmouseover='Config.OperateOsd.showHiddenEditImg(true, \"editImg_field\", "+l+")' onmouseout='Config.OperateOsd.showHiddenEditImg(false, \"editImg_field\", "+l+")'><label id='osdAreaLabel"+l+"' style='float: left'></label><select name='Field"+l+"' id='Field"+l+"' class='hidden' style='width:60px' onchange='Config.OperateOsd.osdAreaChange("+l+")' onblur='Config.OperateOsd.hiddenOsdArea("+l+")'><option value='0' selected='selected'>"+h.lang.pub.none+"</option>"+t+"</select><img id='editImg_field"+l+"' src='../../skin/default_1/images/pen.97cd58cc.gif' class='hidden' style='float: right'></td><td onclick='Config.OperateOsd.editOsdInfo("+l+")' onmouseover='Config.OperateOsd.showHiddenEditImg(true, \"editImg_info\", "+l+")' onmouseout='Config.OperateOsd.showHiddenEditImg(false, \"editImg_info\", "+l+")'><label id='osdInfoLabel"+l+"' style='float: left;width:95%'></label><div id='osdInfoDiv"+l+"' class='hidden' style='position:relative;'><div style='position: absolute;left: 0; right: 20px;'><input type='text' isChanged='0' name='Value"+l+"' id='Value"+l+"' maxlength='30' style='width: 100%;' onchange='Config.OperateOsd.osdInfoChange("+l+")' onblur='Config.OperateOsd.hiddenOsdInfo("+l+")'></div><select name='InfoType"+l+"' id='InfoType"+l+"' style='width: 100%' onchange='Config.OperateOsd.selectInfoType("+l+")' onblur='Config.OperateOsd.hiddenOsdInfo("+l+")'>"+e+"</select><select name='ISInfoType"+l+"' id='ISInfoType"+l+"' class='hidden' style='width: 50%' onblur='Config.OperateOsd.selectISInfoType("+l+");Config.OperateOsd.hiddenOsdInfo("+l+");'>"+n+"</select><label id='logoText"+l+"' style='width: 20%;text-align: right;' title='"+h.lang.pub.logoOpacity+"' class='strLimit hidden'>"+h.lang.pub.logoOpacity+"</label><input type='text' id='logoOpacity"+l+"' name='logoOpacity"+l+"' class='hidden' value='0' style='width: 25%' onchange='Config.OperateOsd.logoOpacityChange("+l+",this)' onkeypress='onPicKeyPress(this);' onblur='Config.OperateOsd.hiddenOsdInfo("+l+")'></div><img id='editImg_info"+l+"' src='../../skin/default_1/images/pen.97cd58cc.gif' class='hidden' style='float: right'></td><td><div class='flagSpan"+r+"' id='status"+l+"'> </div></td></tr>";d.append(p)}},changeOSDChannel:function(){var e=h("#FishEyeVideoMode").val();this.initData(),Video.stopVideo(StreamType.LIVE,0),Video.getCurVideoFormat(e),isOldPlugin?Video.startVideo(StreamType.LIVE,e):Video.startVideo(e),Video.setRenderScale(StreamType.LIVE,0),Utils.EnableDrawFun(StreamType.LIVE,1),this.initOsdDrawObjData()},isValidRollData:function(){var e=!0;return 200<h("#MarqueeTxt").val().length?(e=!1,h("#MarqueeTxt").addClass("MarqueeTxtError")):h("#MarqueeTxt").removeClass("MarqueeTxtError"),e},showAllArea:function(){for(var e,t=0;t<u;t++)e=1,m&&0==I["InfoEnable"+t]&&(e=0),Utils.showHiddenArea(DrawType.TITLE,t,e)},initOsdDrawObjData:function(){var e,t,o=this,a=LANG_TYPE.Chinese==top.language?h.lang.pub.area:"area";for(DrawObjMap={},DrawObjMap[DrawType.TITLE]=[],t=0;t<u;t++)(e={}).Text=a+(t+1),e.Left=100*Number(I["InfoLeft"+t]),e.Top=100*Number(I["InfoTop"+t]),e.LineColor=Utils.getDrawObjColor("99CCFF"),e.FillColor=Utils.getDrawObjColor("99CCFF"),DrawObjMap[DrawType.TITLE].push(e),e.LineWidth=2,e.OSDType=1;Utils.initDrawObj(DrawObjMap,function(){o.showAllArea()})},initVideo_callback:function(e){Utils.EnableDrawFun(e,1),this.initOsdDrawObjData()}}))}(jQuery),Frame.currentNameSpace=Config.OperateOsd;