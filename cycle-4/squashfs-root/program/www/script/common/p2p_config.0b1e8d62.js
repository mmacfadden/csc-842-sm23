Config.P2PConfig=function(i){var n={};return new(Class.extend({init:function(){Utils.beforeDataLoad(),this.initPage(),Utils.initLang(),this.initEvent(),this.initData(),Utils.afterDataLoad()},initPage:function(){this.changDisplayName()},initData:function(){var e="";this.getStatusInfo(),""!=n.ActiveCode&&(Capinfo.isUN&&(e="http://mycloud.uniview.com/qrcode.html?",VersionType.IN===Capinfo.versionType?e=Capinfo.isUniarch?"http://en-uniarch.uniview.com/QRCode.html?":"http://en.mycloud.uniview.com/qrcode.html?":VersionType.DT===Capinfo.versionType&&(e="http://ezcloud.uniview.com/QRCode?")),i("#qrcodeCanvas").qrcode({width:100,height:100,render:"undefined"!=typeof G_vmlCanvasManager?"table":"canvas",correctLevel:0,text:e+n.ActiveCode}))},initEvent:function(){var e=this;i("#DDNSLogout").bind("click",function(){e.logoutDDNS()})},submitF:function(){var e=this,t=i("#p2pOpen").is(":checked")?1:0;t!=n.Enabled&&Utils.LAPI_SetCfgData(LAPI_URL.CloudCfg,{Enabled:t})&&setTimeout(function(){e.getStatusInfo()},1e3)},release:function(){Frame.currentNameSpace="",delete Config.P2PConfig},changeStatusText:function(){var e,t={RegisterStatus:[i.lang.pub.regFail,i.lang.pub.regSucceed]};for(e in t)"undefined"!=typeof n[e]&&(n[e]=t[e][n[e]])},getStatusInfo:function(){var e=i("#Domain");Utils.LAPI_GetCfgData(LAPI_URL.CloudCfg,n)?(e.attr("href","http://"+n.Domain),""==n.UserName?i("#userNameDiv").addClass("hidden"):i("#userNameDiv").removeClass("hidden"),(1==n.Enabled?i("#p2pOpen"):i("#p2pClose")).prop("checked",!0),this.showDDNSBtn(),this.changeStatusText(),Utils.setLabelValue(n),""!=n.RedirectServer&&n.Domain!=n.RedirectServer&&(e.attr("href","http://"+n.RedirectServer),e.html(n.RedirectServer)),""!=n.ActiveCode?(i("#qrcodeDiv").removeClass("hidden"),i("#registID").html(n.ActiveCode)):(e={},Utils.LAPI_GetCfgData(LAPI_URL.LAPI_DeviceBasicInfo,e)?i("#registID").text(e.SerialNumber+n.RandomCode):Utils.disableAll())):Utils.disableAll()},logoutDDNS:function(){Utils.LAPI_SetCfgData(LAPI_URL.Unregistration,"")?(n.RegisterStatus=0,this.showDDNSBtn()):Utils.disableAll()},showDDNSBtn:function(){1==n.RegisterStatus?(i("#registState").text(i.lang.pub.regSucceed),i("#DDNSLogout").removeClass("hidden")):(i("#registState").text(i.lang.pub.regFail),i("#DDNSLogout").addClass("hidden"))},changDisplayName:function(){Capinfo.isUN&&(Capinfo.isUniarch?(i("#myServerName").text("Uniarch"),i("#P2PConfigTab").text("Uniarch"),i("#P2PConfigLink").text("Uniarch")):(i("#myServerName").text(i.lang.pub.myCloudName),i("#P2PConfigTab").text(i.lang.pub.myCloudName),i("#P2PConfigLink").text(i.lang.pub.myCloudName)))}}))}(jQuery),Frame.currentNameSpace=Config.P2PConfig;