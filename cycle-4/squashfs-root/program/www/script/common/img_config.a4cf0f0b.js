Config.Image=function($){var channelId=0,bSpecifiedByInput=!1,isShowVideo=!1,ImgMap={},ImgStableJsonMap={},ImgStableJsonMap_bak={},minShutter=0,shutterType=shutterUnit.reciprocal_s,DivLeft=0,$xml=null,irCrlModeOptions_bak="",LAPI_Type="/VideoStable",isShowPhoto="",sceneInfoList={},conditionList=[],currentID=0,currentSceneType=0,currentEditID=0,AutoSwitchMap={},SceneMap={},MappingMap_SceneMap={SceneID:["SceneID"],SceneType:["SceneType"],SceneName:["SceneName"],AutoSwitch:["AutoSwitch"],Priority:["Priority"]},ScenceArr=[],ShutterOption="",dataMap={Focus:[{FocusMode:["FocusMode"],ManualFocusMinDistance:["ManualFocusMinDistance"],FocusScene:["FocusScene"]},{}],WhiteBalance:[{WhiteBalanceMode:["Mode"],WhiteBalanceRedOffset:["RedOffset"],WhiteBalanceBlueOffset:["BlueOffset"]},{}],Enhance:[{Brightness:["Brightness"],Saturation:["Saturation"],Contrast:["Contrast"],MirrorMode:["ImageRotation"],Sharpness:["Sharpness"],Denoise2D:["2DNoiseReduce"],Denoise3D:["3DNoiseReduce"]},{}],Exposure:[{ExposureMode:["Mode"],ExposureCompensate:["CompensationLevel"],HLCRatio:["HLCSensitivity"],ExposureIris:["IrisInfo","Iris"],ExposureMinIris:["IrisInfo","MinIris"],ExposureMaxIris:["IrisInfo","MaxIris"],ExposureShutter:["ShutterInfo","Shutter"],ExposureFastShutter:["ShutterInfo","MinShutter"],ExposureSlowShutter:["ShutterInfo","MaxShutter"],EnableSlowShutter:["ShutterInfo","IsEnableSlowShutter"],MaxSlowShutter:["ShutterInfo","SlowestShutter"],ExposureGain:["GainInfo","Gain"],ExposureMinGain:["GainInfo","MinGain"],ExposureMaxGain:["GainInfo","MaxGain"],ExposureWDRMode:["WideDynamic","Mode"],ExposureRatioValue:["WideDynamic","Level"],OnSense:["WideDynamic","OpenSensitivity"],OffSense:["WideDynamic","CloseSensitivity"],FlickerSuppression:["WideDynamic","AntiFlicker"],MeteringMode:["Metering","Mode"],RefBrightness:["Metering","RefBrightness"],HoldTime:["Metering","HoldTime"],TopLeftX:["Metering","Area","TopLeft","X"],TopLeftY:["Metering","Area","TopLeft","Y"],BotRightX:["Metering","Area","BottomRight","X"],BotRightY:["Metering","Area","BottomRight","Y"],DayNightMode:["DayNight","Mode"],DayNightSenseValue:["DayNight","Sensitivity"],DayNightSwitchTime:["DayNight","Time"]},{}],SmartIR:[{IrCtrlEnable:["Enabled"],LightMode:["Type"],IrCtrlMode:["Mode"],NearIrLed:["NearLevel"],MiddleIrLed:["MiddleLevel"],FarIrLed:["FarLevel"],SupperFarLevel:["SuperFarLevel"],LaserAngle:["LaserAngle"]},{}],DeFog:[{DeFogMode:["Mode"],DeFogLevel:["Level"]},{}],IRIS:[{IrisMode:["IrisMode"],IrisValue:["IrisValue"],LensIfMode:["LensIfMode"]},{}],ImageAdjust:[{ImageAdjustEnable:["Enable"],ImageAdjustLevel:["Grade"]},{}],RemoteAmp:[{RemoteAmpEnable:["Enabled"],RemoteAmpLevel:["Magnification"]},{}]},dataMap_bak={},DrawObjMap={},sceneTypeName={0:"custom",1:"scene_indoor",2:"scene_outdoor",3:"scene_road",4:"scene_starLight",5:"scene_objective",6:"scene_yard",7:"aeMetering4",8:"wideDynamic",9:"scene_standard",10:"scene_bright",11:"scene_vivid",12:"park_highlight",13:"scene_face",50:"scene_normal",51:"scene_weakBackLighting",52:"scene_intenseBackLighting",53:"scene_weakFrontLighting",54:"scene_intenseFrontLighting",55:"scene_objective",56:"scene_indoor",57:"scene_normal",58:"scene_FPIntegrateLight",80:"scene_front",81:"scene_side"},slidersMap={Brightness:{sliderId:"BrightnessSld",barId:"BrightnessBar",minValue:0,maxValue:255,sld:null},Contrast:{sliderId:"ContrastSld",barId:"ContrastBar",minValue:0,maxValue:255,sld:null},Saturation:{sliderId:"SaturationSld",barId:"SaturationBar",minValue:0,maxValue:255,sld:null},Sharpness:{sliderId:"SharpnessSld",barId:"SharpnessBar",minValue:0,maxValue:255,sld:null},WhiteBalanceRedOffset:{sliderId:"ROffsetSld",barId:"ROffsetBar",minValue:-127,maxValue:127,sld:null},WhiteBalanceBlueOffset:{sliderId:"BOffsetSld",barId:"BOffsetBar",minValue:-127,maxValue:127,sld:null},Denoise2D:{sliderId:"Denoise2DSld",barId:"Denoise2DBar",minValue:0,maxValue:255,sld:null},Denoise3D:{sliderId:"Denoise3DSld",barId:"Denoise3DBar",minValue:0,maxValue:255,sld:null},ExposureCompensate:{sliderId:"ExposureCompensateSld",barId:"ExposureCompensateBar",minValue:-100,maxValue:100,sld:null},ExposureRatioValue:{sliderId:"ExposureRatioSld",barId:"ExposureRatioBar",minValue:1,maxValue:9,sld:null},OnSense:{sliderId:"OnSenseSld",barId:"OnSenseBar",minValue:1,maxValue:9,sld:null},OffSense:{sliderId:"OffSenseSld",barId:"OffSenseBar",minValue:1,maxValue:9,sld:null},DeFogLevel:{sliderId:"DeFogLevelSld",barId:"DeFogLevelBar",minValue:1,maxValue:9,sld:null},ImageAdjustLevel:{sliderId:"ImageAdjustLevelSld",barId:"ImageAdjustLevelBar",minValue:1,maxValue:9,sld:null},RemoteAmpLevel:{sliderId:"RemoteAmpLevelSld",barId:"RemoteAmpLevelBar",minValue:1,maxValue:9,sld:null},LaserAngleText:{sliderId:"LaserAngleSld",barId:"LaserAngleBar",minValue:16,maxValue:636,sld:null},HLCRatio:{sliderId:"HLCRatioSld",barId:"HLCRatioBar",minValue:1,maxValue:9,sld:null},IrisValueAutoManual:{sliderId:"IrisValueSld",barId:"IrisValueBar",minValue:0,maxValue:100,sld:null},RefBrightness:{sliderId:"RefBrightnessSld",barId:"RefBrightnessBar",minValue:0,maxValue:100,sld:null},HoldTime:{sliderId:"HoldTimeSld",barId:"HoldTimeBar",minValue:0,maxValue:60,sld:null}},capMap={ImageTypeItem:"ImageType",BrightnessItem:"Video Enhance Brightness",SaturationtItem:"Video Enhance Saturation",ContrastItem:"Video Enhance Contrast",SharpnessModeItem:"Video Enhance Sharpness Mode",Denoise2DItem:"Video Enhance Denoise _2D",Denoise3DItem:"Video Enhance Denoise _3D",MirrorModeItem:"Video Enhance Mirror Mode",ExposureModeItem:"Video Exposure Mode",ExposureShutterItem:"Video Exposure Shutter",ExposureIrisItem:"Video Exposure Iris",ExposureGainItem:"Video Exposure Gain",ExposureCompensateItem:"Video Exposure Compensate",MeteringModeItem:"Video Exposure Metering Mode",RefBrightnessItem:"Video Exposure Metering RefBrightness",HoldTimeItem:"Video Exposure Metering HoldTime",DayNightModeItem:"Video Exposure DayNight Mode",DayNightSwitchTimeItem:"Video Exposure DayNight Time",ExposureWDRModeItem:"Video Exposure WDR Mode",ExposureWDRSensibilityItem:"Video Exposure WDR Sensitivity",IrCtrlEnableItem:"Video LedCtrl LedCtrlEnable",LightModeItem:"Video LedCtrl LightMode Mode",WhiteBalanceModeItem:"Video WhiteBalance Mode",FocusModeItem:"Video Focus Mode",FocusSceneItem:"Video Focus Scenario",ImageFreezeItem:"Video Misc ImageFreeze",DeFogItem:"Video Defog Mode",StableModeItem:"Video EIS ImageEIS Mode",ImageAdjustItem:"Video LDC",RemoteAmpItem:"Video Enlarge",IFModeItem:"Hardware Lens IFMode Mode"};top.ImageType=undefined==top.ImageType?0:top.ImageType;var urlType=Number(top.ImageType)?"Photo":"Video",cmdMap={Enhance:LAPI_URL.ImageEnhance+"/"+urlType,Exposure:LAPI_URL.Exposure+"/"+urlType,WhiteBalance:LAPI_URL.WhiteBalance+"/"+urlType,Focus:LAPI_URL.FocusCfg+urlType,SmartIR:LAPI_URL.IrCtrl+urlType,DeFog:LAPI_URL.DefogCfg+urlType,EIS:LAPI_URL.ImageStable,ImageAdjust:LAPI_URL.LDC,RemoteAmp:LAPI_URL.RemoteAmp,IRIS:LAPI_URL.LensParam},mainClass=Class.extend({init:function(){var e=$("#MeteringModeSel");Utils.beforeDataLoad();var t={};if(Utils.LAPI_GetCfgData(LAPI_URL.VideoInMode,t)&&(minShutter=parseInt(t.FrameRate)),Capinfo.isSupportCapture&&Utils.LAPI_GetCfgData(LAPI_URL.SUBDEVICE_SWITCH_EX_CFG,t)&&(isShowPhoto=t.StrobeMode),"undefined"==typeof top.ImgCustomParam){if(t={},!Utils.LAPI_GetCfgData(LAPI_URL.SansuoCheckCfg,t))return void Utils.disableAll();top.ImgCustomParam=Number(t.Enabled)}1==top.ImgCustomParam&&$("#exposalCompensationText").text($.lang.pub.backlightCompensation),top.ImageType=undefined==top.ImageType?0:top.ImageType,LAPI_Type=0==top.ImageType?"/VideoStable":"/PhotoStable",$("input[name='ImageType'][value='"+top.ImageType+"']").prop("checked",!0),this.initPage(),$("#freshBtn1").attr("title",$.lang.pub.refresh),$("#freshBtn2").attr("title",$.lang.pub.refresh),Utils.initLang(),this.initData(),$("#MeteringModeItem").hasClass("hidden")||e.prop("disabled")||1!=e.val()||$.blockUI({centerY:!1,css:{border:"none",top:"280px"},overlayCSS:{opacity:"0"},message:'<h3 id="msg"></h3>'}),this.initEvent(),7!=Frame.menuType&&Utils.initVideo("recordManager_div_activeX",StreamType.LIVE,RunMode.CONFIG,null,Capinfo.isSupportPTZ,this.initVideo_callback),Utils.afterDataLoad()},initPage:function(){var e,t="Video",a=$("col"),i=$("#SimpleScene");if(0<Capinfo.sceneCapArr.length&&$("#sceneForm").removeClass("hidden"),Capinfo.isSupport3DdenoiseTip&&$("#denoise3DInfo").removeClass("hidden"),Capinfo.isSupportPIRIS&&Utils.parseCapOptions("IrisMode",Capinfo.IrisModeArr,"mode"),Utils.resetVideoSize(StreamType.LIVE,"recordManager_div_activeX"),Capinfo.isSupportPlumbAngle&&($("#plumbAngleDiv").removeClass("hidden"),$("td").filter(".hidden_td").removeClass("hidden"),a.filter(".planIlluminationCol").attr("width","150px"),a.filter(".plumbAngleCol").removeAttr("width")),Capinfo.isSupportNoAuto){$("#SimpleSceneDiv").removeClass("hidden");for(var n="",s=0;s<Capinfo.sceneCapArr.length;s++){var r=Capinfo.sceneCapArr[s];n+=2==r?"<option value='"+s+"' >"+$.lang.pub.whiteStandoff8+"</option>":"<option value='"+s+"' >"+$.lang.pub[sceneTypeName[r]]+"</option>"}i.empty(),i.append(n)}else 0<Capinfo.sceneCapArr.length&&($("#sceneTbl").removeClass("hidden"),$("#enableAutoChange").removeClass("hidden"));for(e in irCrlModeOptions_bak=$("#IrCtrlMode").html(),ShutterOption=$("select[id='ExposureShutter']").html(),this.getImageDevCap(),1==$("input[name='ImageType']:checked").val()&&(t="Capture"),0<$xml.find("Image "+t+" Exposure Shutter Unit").length&&(shutterType=$xml.find("Image "+t+" Exposure Shutter Unit").text(),shutterUnit.us==shutterType?(minShutter=1e6/minShutter,$("#sDiv").remove(),$("#sUnit").remove(),$("#sMaxSlowDiv").remove(),$("#shutTimeLi").html($.lang.pub.shutTimeMs)):($("#usDiv").remove(),$("#usUnit").remove(),$("#usMaxSlowDiv").remove(),$("#shutTimeLi").html($.lang.pub.shutTimeSecs))),capMap){var l=capMap[e].replace("Video",t);0<$xml.find(l).length?($(document.getElementById(e)).removeClass("hidden"),"ImageFreezeItem"!=e&&"ImageAdjustItem"!=e&&"RemoteAmpItem"!=e&&this.ResolveItems(e,$xml.find(l)[0])):"RefBrightnessItem"==e||"HoldTimeItem"==e?$(document.getElementById(e)).removeClass("hidden"):$(document.getElementById(e)).addClass("hidden")}"1"==isShowPhoto&&$("#ImageTypeItem").addClass("hidden"),Capinfo.isNOSensitivity&&$("#DayNightSenseSlider").addClass("hidden"),$("#LightModeItem").hasClass("hidden")||$("#IrCtrlModeItem").removeClass("hidden");var o=$("#ExposureSlowShutter"),d=$("#ExposureFastShutter"),p=o.hasClass("hidden")||d.hasClass("hidden"),u=$("#ExposureMinIris"),m=$("#ExposureMaxIris"),h=u.hasClass("hidden")||m.hasClass("hidden"),c=$("#ExposureMinGain"),a=$("#ExposureMaxGain"),i=c.hasClass("hidden")||a.hasClass("hidden");p&&($("#shutterLabel").addClass("hidden"),o.removeClass("shortText2").addClass("nomalTxt"),d.removeClass("shortText2").addClass("nomalTxt")),h&&($("#irisLabel").addClass("hidden"),u.removeClass("shortText2").addClass("nomalTxt"),m.removeClass("shortText2").addClass("nomalTxt")),i&&($("#gainLabel").addClass("hidden"),c.removeClass("shortText2").addClass("nomalTxt"),a.removeClass("shortText2").addClass("nomalTxt")),$("#LaserAngleItem").hasClass("hidden")||$("#farIrLedLI").html($.lang.pub.laserLed),Capinfo.isSupportLenIfMode&&("0"==top.ImageType&&$("#lensModeUL").removeClass("hidden"),0==$xml.find(capMap.IFModeItem).length?$("#LensIfMode_dciris").remove():Utils.parseCapOptions("LensIfMode",$xml.find(capMap.IFModeItem).text().split(","),"mode")),0<Capinfo.isSupportPIRIS&&0==top.ImageType&&$("#PIRISItem").removeClass("hidden"),$("fieldset[id]").each(function(){var e=[];$("#"+this.id+" ul").each(function(){$(this).hasClass("hidden")||$(this).parent().hasClass("unit")&&$(this).parent().hasClass("hidden")||e.push(this)});var t=Math.round(e.length/2);if(0==t&&$(this).addClass("hidden"),7!=Frame.menuType)for(var a=0;a<t;a++){var i=e[a],n=i.parentNode;"DIV"==n.nodeName&&$(n).hasClass("unit")&&(i=n),$(i).addClass("newLine")}}),7==Frame.menuType&&($("#renderBar").addClass("hidden"),$("#frmSetup").css("width","490px"),$("div.div_content").css("width","auto"),$("Div[class='left_Content']").removeClass("left_Content").addClass("hidden"),$("Div[class='right_Content']").removeClass("right_Content"),$("Div[class='right_Content_Content']").removeClass("right_Content_Content"),$("#resetDiv").css("margin","0px"),$("#sceneInfoDiv").css("minWidth","470px"),$("#conditionInfoDiv").css("minWidth","470px"),$("#sceneTbl").css("min-width","490px"),$("#MeteringModeItem").addClass("hidden"),$(".autoChangeCol").css("width","95px"),$(".unit").css("width","480px"),$("ul").css("width","480px"),$(".slider3").css("width","120px"),$(".slider4").css("width","120px"),$("select").css("width","160px"),$(".nomalTxt").css("width","160px"),$(".shortText2").css("width","80px"))},initData:function(){var e,t,a=0,i=!0,n=["div_content_exposure","div_content_smartir","div_content_focus","div_content_whitebalance","div_content_misc"],s=["div_content_enhance","div_content_exposure","div_content_smartir"];for(this.initSlider(),e=n.length;a<e;a++)(r=$("#"+n[a])).addClass("hidden"),r.parent().addClass("close"),r.attr("flag",0);for(a=0,e=s.length;a<e;a++){var r,l=(r=$("#"+s[a])).attr("apiType");if(!Utils.LAPI_GetCfgData(cmdMap[l],dataMap[l][1])){i=!1;break}r.attr("flag",1),Utils.LAPI_CfgToForm("frmSetup",dataMap[l][1],ImgMap,dataMap[l][0])}i&&!$("#DeFogItem").hasClass("hidden")&&(i=Utils.LAPI_GetCfgData(cmdMap.DeFog,dataMap.DeFog[1]))&&Utils.LAPI_CfgToForm("frmSetup",dataMap.DeFog[1],ImgMap,dataMap.DeFog[0]),$("#sceneForm").is(":visible")&&(i=(i=i&&this.getPlanStatus())&&this.getCurrentSceneType())&&Capinfo.isSupportNoAuto&&(t={},(i=Utils.LAPI_GetCfgData(LAPI_URL.CurrentScene,t))&&(currentID=t.SceneID),$("#SimpleScene").val(currentID)),i?this.resetForm():(this.disablePage(),Frame.showMsg(!0,$.lang.tip.tipGetImgCfgFail)),this.isDeleteExposureShutterOptions()},initEvent:function(){var l=this;$("#ImageAdjustEnable").change(function(){l.imageAdjust_change(),l.submitF($(this).attr("apiType"))}),$("#RemoteAmpEnable").change(function(){l.RemoteAmp_change(),l.submitF($(this).attr("apiType"))}),$("input[name='FlickerSuppression']").bind("click",function(){l.submitF($(this).attr("apiType"))}),$("input[name='ImageType']").bind("click",l.changeImageType),$("#ExposureMode").change(function(){l.exposal_changePage(),l.submitF($(this).attr("apiType"))}),$("#WhiteBalanceMode").change(function(){l.WhiteStandoff_change(),l.submitF($(this).attr("apiType"))}),$("input[name='DayNightMode']").bind("click",function(){l.DayNightMode_onclick(),l.submitF($(this).attr("apiType"))}),$("#LensIfMode").change(function(){l.submitF($(this).attr("apiType")),l.LensIfMode_change()}),$("input[name='IrCtrlEnable']").bind("click",function(){l.submitF($(this).attr("apiType"))}),$("#IrisMode").bind("click",function(){l.PIRISMode_onclick();var e=$("#IrisMode");e.val()!=ImgMap.IrisMode&&(0!=e.val()&&1!=e.val()||l.submitF($(this).attr("apiType")),2==e.val()&&(e=$("#BiggestIRIS"),0==ImgMap.SmallestIRIS&&0==ImgMap.BiggestIRIS&&e.val("50"),e=Number($("#IrisValueAutoManual").val())|Number($("#SmallestIRIS").val())<<16|Number(e.val())<<24,$("#IrisValue").val(e),l.submitF("IRIS")))}),$("#DayNightSenseValue,#DayNightSwitchTime").change(function(){l.submitF($(this).attr("apiType"))}),$("#MirrorMode").change(function(){l.submitF($(this).attr("apiType"))&&l.MirrorMode_changePage()}),$("#ExposureIris").change(function(){l.submitF($(this).attr("apiType"))}),$("#ExposureMinIris").change(function(){l.validateRange(this.id,"iris")&&l.submitF($(this).attr("apiType"))}),$("#ExposureMaxIris").change(function(){l.validateRange(this.id,"iris")&&l.submitF($(this).attr("apiType"))}),$("#MeteringModeSel").change(function(){4!=$("#MeteringModeSel").val()?($("#RefBrightnessItem").addClass("hidden"),$("#HoldTimeItem").addClass("hidden")):($("#RefBrightnessItem").removeClass("hidden"),$("#HoldTimeItem").removeClass("hidden")),l.setSliderValue(),$("#MeteringMode").val($("#MeteringModeSel").val()),l.submitF($(this).attr("apiType"))&&l.setMeteringArea()}),$("#ExposureWDRMode").change(function(){l.DWRMode_change(),l.submitF($(this).attr("apiType"))}),$("#FocusMode").change(function(){l.submitF($(this).attr("apiType"))}),$("#FocusScene").change(function(){l.submitF($(this).attr("apiType"))}),$("#ImageFreeze").change(function(){l.submitF($(this).attr("apiType"))}),$("#DeFogMode").change(function(){l.submitF($(this).attr("apiType"))&&l.DeFog_change()}),$("#StableMode").change(function(){l.submitF($(this).attr("apiType"))&&l.EIS_click()}),$("#Rate").change(function(){l.submitF($(this).attr("apiType"))}),$("input[name='EnableSlowShutter']").bind("click",function(){l.submitF($(this).attr("apiType"))&&l.enableMaxSlowShutter()}),$("#LightMode").change(function(){l.parserIrItem(),l.lightMode_change(),l.submitF($(this).attr("apiType"))}),$("#SimpleScene").change(function(){l.setCurrentScene(this.value)}),$("#PlanEnable").bind("click",function(){AutoSwitchMap.Enable=this.checked?1:0;var e=Utils.LAPI_SetCfgData(LAPI_URL.SceneAutoSwitch,AutoSwitchMap);e?(l.showBlockDiv(this.checked,"autoSwitch"),l.setMeteringArea()):$(this).prop("checked",!this.checked),Frame.showMsg(e)}),$("#okBtn").bind("click",function(){if(!l.ValidConditon())return!1;var e=conditionList[currentEditID],t={};if(!Utils.IsChanged("sceneForm",e))return!1;var a,i={};for(a in e)i[a]=e[a];for(a in Utils.formToCfg("sceneForm",i),i)""==i[a]&&(-1<a.indexOf("StartTime")||-1<a.indexOf("EndTime"))&&(i[a]="00:00:00");for(var n=0;n<4;n++)t["Condition"+(n+1)+"Max1"]=["Trigger",n,"Condition",0,"Param2"],t["Condition"+(n+1)+"Min1"]=["Trigger",n,"Condition",0,"Param1"],t["Condition"+(n+1)+"Type1"]=["Trigger",n,"Condition",0,"Type"],t["Condition"+(n+1)+"Max2"]=["Trigger",n,"Condition",1,"Param2"],t["Condition"+(n+1)+"Min2"]=["Trigger",n,"Condition",1,"Param1"],t["Condition"+(n+1)+"Type2"]=["Trigger",n,"Condition",1,"Type"],t["StartTime"+(n+1)]=["Trigger",n,"Begin"],t["EndTime"+(n+1)]=["Trigger",n,"End"];Utils.changeMapToMapByMapping(ScenceArr[currentEditID],t,i,1);var s=Utils.LAPI_SetCfgData(LAPI_URL.SceneIndex+currentEditID,ScenceArr[currentEditID]);if(s){for(var r=1;r<5;r++)"00:00:00"==i["StartTime"+r]&&"00:00:00"==i["EndTime"+r]&&(i["StartTime"+r]="",i["EndTime"+r]="");conditionList[currentEditID]=i,l.showBlockDiv(!1,"edit")}Frame.showMsg(s)}),$("#cancelBtn").bind("click",function(){l.showBlockDiv(!1,"edit")}),$("#IrCtrlMode").change(function(){l.IrCtrlMode_change();var e=$("#IrCtrlMode").val(),t=$xml.find("Image Video IrCtrl Mode").text().split(","),t=-1<Utils.isContainsElement("6",t);t&&5==e&&Utils.LAPI_SetCfgData(cmdMap.Exposure,{DayNight:{Mode:0}}),l.submitF($(this).attr("apiType")),t&&(3!=e&&7!=e||Utils.LAPI_SetCfgData(cmdMap.Exposure,{DayNight:{Mode:1}}))}),$("fieldset legend").each(function(){$(this).bind("click",function(){var e,t,a,i,n=$(this).next();n.hasClass("hidden")?0==n.attr("flag")?(e=!0,t=$("input[name='ImageType']:checked").val(),"Misc"==(a=n.attr("apiType"))?(e&&!$("#StableModeItem").hasClass("hidden")&&(e=Utils.LAPI_GetCfgData(cmdMap.EIS+LAPI_Type,ImgStableJsonMap))&&(ImgStableJsonMap_bak=Utils.objectClone(ImgStableJsonMap),Utils.LAPI_CfgToForm("frmSetup",ImgStableJsonMap)),e&&!$("#ImageAdjustItem").hasClass("hidden")&&(e=Utils.LAPI_GetCfgData(cmdMap.ImageAdjust,dataMap.ImageAdjust[1]))&&(Utils.LAPI_CfgToForm("frmSetup",dataMap.ImageAdjust[1],ImgMap,dataMap.ImageAdjust[0]),dataMap_bak=Utils.objectClone(ImgMap)),e&&!$("#RemoteAmpItem").hasClass("hidden")&&(e=Utils.LAPI_GetCfgData(cmdMap.RemoteAmp,dataMap.RemoteAmp[1]))&&(Utils.LAPI_CfgToForm("frmSetup",dataMap.RemoteAmp[1],ImgMap,dataMap.RemoteAmp[0]),dataMap_bak=Utils.objectClone(ImgMap)),!e||$("#lensModeUL").hasClass("hidden")&&$("#PIRISItem").hasClass("hidden")||(e=Utils.LAPI_GetCfgData(cmdMap.IRIS,dataMap.IRIS[1]))&&(i=dataMap.IRIS[1].IrisValue,Utils.LAPI_CfgToForm("frmSetup",dataMap.IRIS[1],ImgMap,dataMap.IRIS[0]),dataMap_bak=Utils.objectClone(ImgMap),ImgMap.IrisValueAutoManual=65535&i,ImgMap.SmallestIRIS=(16711680&i)>>16,ImgMap.BiggestIRIS=i>>24)):"scene"==a?(e=l.initScene(),7==Frame.menuType&&($("#planTimeCol").css("width","170px"),$("#planTimeCol2").css("width","170px"),$("input").filter(".Wdate").removeClass("nomalTxt").addClass("shortText_70"))):"string"!=typeof cmdMap[a]?e=Utils.getCfgData(channelId,cmdMap[a],ImgMap,t):(e=Utils.LAPI_GetCfgData(cmdMap[a],dataMap[a][1]))&&(Utils.LAPI_CfgToForm("frmSetup",dataMap[a][1],ImgMap,dataMap[a][0]),dataMap_bak=Utils.objectClone(ImgMap)),e&&(n.attr("flag",1),n.removeClass("hidden"),$(this).parent().removeClass("close"),l.resetForm())):(n.removeClass("hidden"),$(this).parent().removeClass("close"),l.setSliderValue()):(n.addClass("hidden"),$(this).parent().addClass("close"))})})},submitF:function(e){var t=!1;if("string"==typeof cmdMap[e]){if(!(LAPI_URL.ImageStable==cmdMap[e]?(Utils.LAPI_FormToCfg("frmSetup",ImgStableJsonMap),!Utils.isObjectEquals(ImgStableJsonMap,ImgStableJsonMap_bak)):(Utils.LAPI_FormToCfg("frmSetup",dataMap[e][1],ImgMap,dataMap[e][0]),!Utils.isObjectEquals(ImgMap,dataMap_bak))))return;LAPI_URL.ImageStable==cmdMap[e]?(t=Utils.LAPI_SetCfgData(cmdMap[e]+LAPI_Type,ImgStableJsonMap))&&(ImgStableJsonMap_bak=Utils.objectClone(ImgStableJsonMap)):(t=Utils.LAPI_SetCfgData(cmdMap[e],dataMap[e][1]))&&(dataMap_bak=Utils.objectClone(ImgMap))}else{if(!Utils.IsChanged("frmSetup",ImgMap))return;t=Utils.setCfgData(channelId,cmdMap[e],"frmSetup",ImgMap)}return t?this.isDeleteExposureShutterOptions():this.resetForm(),t},release:function(){$blockDiv3=$("#blockDiv3"),isShowVideo||(Utils.EnableDrawFun(StreamType.LIVE,0),top.ImageType=0,Frame.hiddenVideo()),$blockDiv3.is(":visible")&&$blockDiv3.css("display","none"),delete Config.Image},initVideo_callback:function(e){Utils.EnableDrawFun(e,1),Config.Image.initAreaDrawObjData()},LAPI_initData:function(e,t,a,i){e=Utils.LAPI_GetCfgData(e,t);return e?Utils.LAPI_CfgToForm("frmSetup",t,a,i):Utils.disableAll(),e},LAPI_submitF:function(e,t,a,i){return Utils.LAPI_FormToCfg("frmSetup",t,a,i),Utils.LAPI_SetCfgData(e,t)},eventSwitchScene:function(e){currentID=e,Config.Image.initData(),1==$("#sceneDiv").attr("flag")&&$("#SceneID"+currentID).prop("checked",!0)},eventDrawObjParam:function(e,t,a){var i,n={},s=DrawObjMap[e][t];for(i in isOldPlugin&&!Capinfo.isMac?Utils.sdkAddCfg(n,a):n=$.parseJSON(a),n)s[i]=Number(n[i]);$("#TopLeftX").val(Math.round(s.Left/100)),$("#TopLeftY").val(Math.round(s.Top/100)),$("#BotRightX").val(Math.round(s.Right/100)),$("#BotRightY").val(Math.round(s.Bottom/100)),Config.Image.submitF("Exposure")},eventSelDrawObj:function(e,t){Utils.selectDrawObj(e,t)},focusInSceneName:function(e){0!=$("#SceneType"+e).val()&&$("#SceneName"+e).blur()},changeSceneName:function(e){var t;0==$("#SceneType"+e).val()&&(t=$("#SceneName"+e).val(),this.validataSceneName(e,t)&&t!=sceneInfoList[e].SceneName&&this.setSceneInfo(e))},changeSceneType:function(e){var t,a,i,n=$("#SceneType"+e);confirm($.lang.tip.tipChangeSceneType)?(t=n.val(),a=$("#SceneType"+e+" option:selected").text(),i=$("#SceneName"+e),0==t?(i.val(""),i.focus()):i.val(a),this.setSceneInfo(e),e==currentID&&this.initData()):n.val(sceneInfoList[e].SceneType)},getDefaultScene:function(){var e={},t={},a=Utils.LAPI_GetCfgData(LAPI_URL.DefaultScene,t);return e.DefaultSceneID=t.SceneID,a&&(Utils.cfgToForm(e,"sceneForm"),e=e.DefaultSceneID,$("#AutoSwitch"+e).addClass("hidden2"),$("#config"+e).addClass("hidden"),$("#defaultScene"+e).addClass("hidden"),$("#defaultScene_label"+e).removeClass("hidden")),a},setDefaultScene:function(e){var t=$("#DefaultSceneID"),a=t.val();t.val(e),Utils.LAPI_SetCfgData(LAPI_URL.DefaultScene,{SceneID:e})?($("#AutoSwitch"+a).removeClass("hidden2"),$("#config"+a).removeClass("hidden"),$("#defaultScene"+a).removeClass("hidden"),$("#defaultScene_label"+a).addClass("hidden"),$("#AutoSwitch"+e).addClass("hidden2"),$("#config"+e).addClass("hidden"),$("#defaultScene"+e).addClass("hidden"),$("#defaultScene_label"+e).removeClass("hidden")):t.val(a)},initSceneTable:function(){for(var e="",t=0;t<Capinfo.sceneCapArr.length;t++){var a=Capinfo.sceneCapArr[t];e+="<option value='"+a+"' >&lt"+$.lang.pub[sceneTypeName[a]]+"&gt</option>"}for(t=0;t<5;t++){var i=sceneInfoList[t],n=!!i&&1==i.AutoSwitch,s="<tr><td>"+(t+1)+"</td><td>    <input type='radio' name='SceneID' id='SceneID"+t+"' value='"+t+"' onclick='Config.Image.setCurrentScene("+t+")'></td><td>    <input type='text' name='SceneName"+t+"' id='SceneName"+t+"' value='' class='SceneNameClass' maxlength='10'  onfocus='Config.Image.focusInSceneName("+t+")' onblur='Config.Image.changeSceneName("+t+")' onKeyPress='Utils.onPicKeyPress(this)'>    <select name='SceneType"+t+"' id='SceneType"+t+"' class='SceneTypeClass' onchange='Config.Image.changeSceneType("+t+")'>"+e+"    </select></td><td>    <input type='checkbox' name='AutoSwitch"+t+"' id='AutoSwitch"+t+"' onclick='Config.Image.setSceneInfo("+t+")'></td><td>    <img id='config"+t+"' alt='"+$.lang.pub.sceneConditions+"' src='../../skin/default_1/images/condition.bc017030.png' onclick='Config.Image.getConditionInfo("+t+")' style='margin-right: 15px;'>    <img id='defaultScene"+t+"' alt='"+$.lang.pub.beDefaultScene+"' src='../../skin/default_1/images/default.bff93881.png' onclick='Config.Image.setDefaultScene("+t+")'>    <label id='defaultScene_label"+t+"' class='hidden'>"+$.lang.pub.defaultScene+"</label></td></tr>";$("#sceneInfo").append(s),$("#AutoSwitch"+t).prop("checked",n),$("#SceneType"+t).val(i.SceneType);n=i?i.SceneName:"";0!=i.SceneType&&(n=$("#SceneType"+t+" option:selected").text()),$("#SceneName"+t).val(n)}for(t=1;t<5;t++)s="<tr>        <td>            <input name='StartTime"+t+"' id='StartTime"+t+"' type='text' value='' class='Wdate nomalTxt' readonly='readonly'/>            ~            <input name='EndTime"+t+"' id='EndTime"+t+"' type='text' value='' class='Wdate nomalTxt' readonly='readonly'/>        </td>        <td>            <input type='hidden' name='Condition"+t+"Type1' id='Condition"+t+"Type1'>            <input type='text' name='Condition"+t+"Min1' id='Condition"+t+"Min1' class='shortText' maxlength='6' onchange='' onblur='Config.Image.checkIllum(this)'>            ~            <input type='text' name='Condition"+t+"Max1' id='Condition"+t+"Max1' class='shortText' maxlength='6' onchange='' onblur='Config.Image.checkIllum(this)'>        </td>        <td class='"+(Capinfo.isSupportPlumbAngle?"":"hidden")+"'>            <input type='hidden' name='Condition"+t+"Type2' id='Condition"+t+"Type2'>            <input type='text' name='Condition"+t+"Min2' id='Condition"+t+"Min2' title='"+$.lang.pub.range+"0-90' class='shortText_25' maxlength='2' onchange='' onblur='Config.Image.checkElev(this)'>            ~            <input type='text' name='Condition"+t+"Max2' id='Condition"+t+"Max2' title='"+$.lang.pub.range+"0-90' class='shortText_25' maxlength='2' onchange='' onblur='Config.Image.checkElev(this)'>        </td>    </tr>",$("#conditionInfo").append(s)},validataSceneName:function(e,t){var a,i=!0;return 10<t.length&&(alert($.lang.tip.tipSceneNameErr),(a=$("#SceneType"+e)).val(sceneInfoList[e].SceneType),t=sceneInfoList[e].SceneName,0!=a.val()&&(t=$("#SceneType"+e+" option:selected").text()),$("#SceneName"+e).val(t),i=!1),i},initScene:function(){var e=this.getSceneInfo();return e=(e=(e=e&&this.getDefaultScene())&&this.getCurrentID())&&this.getCurrentValue("illumination",sceneConditionType.ILLUMINATION,$.lang.tip.tipGetIlluminationFailded),e=Capinfo.isSupportPlumbAngle&&e?this.getCurrentValue("plumbAngle",sceneConditionType.CONDITION_TILT,$.lang.tip.tipGetPlumbAngleFailded):e},getSceneInfo:function(){for(var e=!0,t=0;t<4;t++)MappingMap_SceneMap["Condition"+(t+1)+"Max1"]=["Trigger",t,"Condition",0,"Param2"],MappingMap_SceneMap["Condition"+(t+1)+"Min1"]=["Trigger",t,"Condition",0,"Param1"],MappingMap_SceneMap["Condition"+(t+1)+"Type1"]=["Trigger",t,"Condition",0,"Type"],MappingMap_SceneMap["Condition"+(t+1)+"Max2"]=["Trigger",t,"Condition",1,"Param2"],MappingMap_SceneMap["Condition"+(t+1)+"Min2"]=["Trigger",t,"Condition",1,"Param1"],MappingMap_SceneMap["Condition"+(t+1)+"Type2"]=["Trigger",t,"Condition",1,"Type"],MappingMap_SceneMap["StartTime"+(t+1)]=["Trigger",t,"Begin"],MappingMap_SceneMap["EndTime"+(t+1)]=["Trigger",t,"End"];for(var a=0;a<5;a++){var i={};if(SceneMap={},e=this.LAPI_initData(LAPI_URL.SceneIndex+a,SceneMap,i,MappingMap_SceneMap),ScenceArr.push(SceneMap),!e)break;for(var n,s={},r={},l=1;l<5;l++)"00:00:00"==i["StartTime"+l]&&"00:00:00"==i["EndTime"+l]&&(i["StartTime"+l]="",i["EndTime"+l]="");for(n in i){var o=i[n];"SceneName"==n||"AutoSwitch"==n||"SceneID"==n||"Priority"==n||"SceneType"==n?s[n]=o:r[n]=o}sceneInfoList[a]=s,conditionList[a]=r}return this.initSceneTable(),$("input").filter(".Wdate").bind("focus",Utils.pickerTime),e},getCurrentID:function(){var e={},t=Utils.LAPI_GetCfgData(LAPI_URL.CurrentScene,e);return t&&$("#SceneID"+(currentID=e.SceneID)).prop("checked",!0),t},getCurrentValue:function(e,t,a){var i={},n=Utils.LAPI_GetCfgData(LAPI_URL.SceneEnvironment+t,i);return n?(t="plumbAngle"==e?"°":"",$("#"+e).html(i.Value+t)):Frame.showMsg(n,a),n},getPlanStatus:function(){AutoSwitchMap={};var e=Utils.LAPI_GetCfgData(LAPI_URL.SceneAutoSwitch,AutoSwitchMap);return e?1==AutoSwitchMap.Enable&&($("#PlanEnable").prop("checked",!0),this.showBlockDiv(!0,"autoSwitch")):Frame.showMsg(!1,$.lang.tip.tipGetAutoSwitchStatusFailded),e},setSceneInfo:function(e){var t={},a={},i=$("#SceneType"+e),n=$("#SceneName"+e),s=$("#AutoSwitch"+e);t.SceneID=e,t.SceneType=i.val(),t.SceneName=n.val(),t.AutoSwitch=s.is(":checked")?1:0;t=Utils.LAPI_SetCfgData(LAPI_URL.SceneIndex+e,t);t?(a.SceneType=i.val(),a.SceneName=n.val(),a.AutoSwitch=s.is(":checked")?1:0,sceneInfoList[e]=a,ScenceArr[e].SceneType=a.SceneType,ScenceArr[e].SceneName=a.SceneName,ScenceArr[e].AutoSwitch=a.AutoSwitch):(a=sceneInfoList[e],i.val(a.SceneType),n.val(a.SceneName),s.prop("checked",1==a.AutoSwitch)),Frame.showMsg(t)},setCurrentScene:function(e){if(currentID!=e){var t=Utils.LAPI_SetCfgData(LAPI_URL.CurrentScene,{SceneID:e});return t?currentID=e:$("#SceneID"+currentID).prop("checked",!0),Frame.showMsg(t),t}},getConditionInfo:function(e){this.showBlockDiv(!0,"edit");var t=conditionList[currentEditID=e];$("#sceneNameLabel").text($("#SceneName"+e).val()),Utils.cfgToForm(t,"sceneForm")},showBlockDiv:function(e,t){var a,i=e?"block":"none",n=document.getElementById("configContainer"),s=$("#blockDiv4"),r=$("#blockDiv6");e&&(a=n.scrollWidth<n.clientWidth?"100%":n.scrollWidth+"px",n=n.scrollHeight<n.clientHeight?"100%":n.scrollHeight+"px",s.css({width:a,height:n})),"edit"==t?(this.scrollDiv(e?"left":"right"),e?$("#PlanEnable").css("position","static"):$("#PlanEnable").css("position","relative")):"autoSwitch"==t&&r.css("display",i),s.css("display",i)},ValidConditon:function(){for(var e=[],t=[],a=0;a<4;a++)if(e[a]=$("#StartTime"+(a+1)).val(),t[a]=$("#EndTime"+(a+1)).val(),""!=e[a]||""!=t[a]){if(""==e[a]||""==t[a])return alert($.lang.tip.tipSceneTimeFormatErr1),!1;if(e[a]>=t[a])return alert($.lang.tip.tipSceneTimeFormatErrStartEnd),!1}for(a=0;a<4;a++)if(""!=e[a]||""!=t[a])for(var i=1;a+i<4;i++){var n=e[a+i],s=t[a+i];if((""!=n||""!=s)&&(e[a]>=n&&e[a]<=s||n>=e[a]&&n<=t[a]))return alert($.lang.tip.tipSceneTimeOverlap),!1}for(a=1;a<5;a++){var r=$("#Condition"+a+"Min1").val(),l=$("#Condition"+a+"Max1").val();if(!Utils.validNum(r)||!Utils.validNum(l)||""==r||""==l)return alert($.lang.tip.tipLumenFormatErr1),!1;if(parseInt(r)>parseInt(l))return alert($.lang.tip.tipLumenFormatErrStartEnd),!1;if(r=$("#Condition"+a+"Min2").val(),l=$("#Condition"+a+"Max2").val(),!Utils.validNum(r)||!Utils.validNum(l)||""==r||""==l)return alert($.lang.tip.tipPlumbAngleFormatErr),!1;if(90<parseInt(r)||parseInt(r)<0||90<parseInt(l)||parseInt(l)<0)return alert($.lang.tip.tipPlumbAngleFormatErr1),!1;if(parseInt(r)>parseInt(l))return alert($.lang.tip.tipPlumbAngleFormatErrStartEnd),!1}return!0},scrollDiv:function(e){var t=this,a=$("#sceneInfoDiv");"right"==e?DivLeft<0&&(DivLeft+=4,a.css("left",DivLeft+"%"),a.css("right",0-DivLeft+"%"),$("#conditionInfoDiv").css("left",100+DivLeft+"%"),setTimeout(function(){t.scrollDiv("right")},40)):-100<DivLeft&&(DivLeft-=4,a.css("left",DivLeft+"%"),a.css("right",0-DivLeft+"%"),$("#conditionInfoDiv").css("left",100+DivLeft+"%"),setTimeout(function(){t.scrollDiv("left")},40))},getCurrentSceneType:function(){var e={},t=!1;return this.getCurrentID()&&this.LAPI_initData(LAPI_URL.SceneIndex+currentID,SceneMap,e,MappingMap_SceneMap)&&(currentSceneType=Number(e.SceneType),t=!0),t},checkIllum:function(e){Utils.validNumber(e,0,999999,$.lang.tip.tipNumScopeErr.replace("%s","0-999999"))&&(this.defaultValue=this.value)},checkElev:function(e){Utils.validNumber(e,0,90,$.lang.tip.tipNumScopeErr.replace("%s","0-90"))&&(this.defaultValue=this.value)},validateRange:function(e,t){var a,i,n;switch(t){case"shutter":var s=$("#ExposureFastShutter"),r=$("#ExposureSlowShutter");if(s.hasClass("hidden")||r.hasClass("hidden"))return!0;n=$.lang.tip.tipShutterRangeErr,i=0<$("#usDiv").length?(a=s.val(),r.val()):(a=r.val(),s.val());break;case"gain":r=$("#ExposureMinGain"),s=$("#ExposureMaxGain");if(r.hasClass("hidden")||s.hasClass("hidden"))return!0;n=$.lang.tip.tipGainRangeErr,a=r.val(),i=s.val();break;case"iris":var l=$("#ExposureMinIris"),o=$("#ExposureMaxIris");if(l.hasClass("hidden")||o.hasClass("hidden"))return!0;n=$.lang.tip.tipIrisRangeErr,a=o.val(),i=l.val();break;case"IRIS":o=$("#SmallestIRIS"),l=$("#BiggestIRIS");if(o.hasClass("hidden")||l.hasClass("hidden"))return!0;n=$.lang.tip.tipIrisRangeErr,a=o.val(),i=l.val();break;default:i=a=0}t=parseInt(a,10)<=parseInt(i,10);return t||(alert(n),$("#"+e).val(ImgMap[e])),t},setIrisDefaultValue:function(){var e=Capinfo.IrisDefaultValueArr[0];$("#IrisValueAutoManual").val(e);var t=Number(e)|Number(ImgMap.SmallestIRIS)<<16|Number(ImgMap.BiggestIRIS)<<24;$("#IrisValue").val(t),slidersMap.IrisValueAutoManual.sld.SetValue(e),this.submitF("IRIS")},isDeleteExposureShutterOptions:function(){var e,t=[2,3,4,8,10,15,20],a=$("#ExposureShutter");if(5==currentSceneType&&Frame.enhanceMode&&2==ImgMap.ExposureMode)for(e=0;e<t.length;e++)a.find("option[value="+t[e]+"]")&&a.find("option[value="+t[e]+"]").remove()},ResolveItems:function(e,t){var a=e.replace("Item","");if("Shutter"==t.tagName)for(var i=t.childNodes,n=i.length,s=0;s<n;s++){var r=i[s];if(1==r.nodeType){var l,o=$(r).text().split(","),d=r.tagName;switch(2==o.length&&(parseInt(o[0])>parseInt(o[1])&&(l=o[0],o[0]=o[1],o[1]=l),shutterUnit.reciprocal_s==shutterType?o[0]<minShutter&&o[1]>minShutter&&(o[0]=minShutter):shutterUnit.us==shutterType&&o[0]<minShutter&&o[1]>minShutter&&(o[1]=minShutter)),d){case"Unit":break;case"SlowShutter":var a="MaxSlowShutter",p=$(t).children("Range").text().split(",");o[0]=Math.min(parseInt(p[0]),parseInt(p[1])),o[1]=minShutter,$("#EnableSlowShutterItem").removeClass("hidden");break;case"Range":a="ExposureShutter";break;case"SlowRange":$("#"+(a="ExposureSlowShutter")).removeClass("hidden");break;case"FastRange":$("#"+(a="ExposureFastShutter")).removeClass("hidden")}o&&1<o.length&&this.resetOptions(a,o,"range")}}else if(0<$(t).children().length)for(n=(i=t.childNodes).length,s=0;s<n;s++)1==(r=i[s]).nodeType&&(o=$(r).text().split(","),1==r.nodeType&&(-1<r.tagName.indexOf("Min")?"ExposureIrisItem"==e?a="ExposureMinIris":"ExposureGainItem"==e&&(a="ExposureMinGain"):-1<r.tagName.indexOf("Max")&&("ExposureIrisItem"==e?a="ExposureMaxIris":"ExposureGainItem"==e&&(a="ExposureMaxGain")),$("#"+a).removeClass("hidden")),o&&1<o.length&&(3==currentSceneType&&"ExposureGainItem"==e&&(o[1]=48),this.resetOptions(a,o,"range")));else{switch(o=$(t).text().split(","),e){case"SharpnessModeItem":-1<Utils.isContainsElement("2",o)?$("#sharpnessSlider").removeClass():$("#sharpnessSlider").addClass("hidden");break;case"WhiteBalanceModeItem":-1<Utils.isContainsElement("2",o)?($("#rSlider").removeClass(),$("#bSlider").removeClass()):($("#rSlider").addClass("hidden"),$("#bSlider").addClass("hidden"));break;case"DayNightModeItem":-1<Utils.isContainsElement("1",o)?$("#DayNightSenseSlider").removeClass():$("#DayNightSenseSlider").addClass("hidden");break;case"StableModeItem":-1<Utils.isContainsElement("1",o)?$("#EisFrequency").removeClass():$("#EisFrequency").addClass("hidden");break;case"ImageTypeItem":1==o.length&&$("#ImageTypeItem").addClass("hidden");break;case"ExposureWDRModeItem":-1<Utils.isContainsElement("2",o)?$("#ExposureRatioSlider").removeClass():$("#ExposureRatioSlider").addClass("hidden");break;case"DeFogItem":a="DeFogMode",-1<Utils.isContainsElement("2",o)?$("#DeFogLevelUL").removeClass("hidden"):$("#DeFogLevelUL").addClass("hidden");break;case"MeteringModeItem":a="MeteringModeSel"}"Mode"!=t.tagName&&"Scenario"!=t.tagName||this.resetOptions(a,o,"mode")}},resetOptions:function(id,list,type){var optionsArr=[],e=eval("document.frmSetup."+id),i,len,option;if(undefined!=e){if("undefined"==typeof e.name){if("radio"==e[0].type){if(1==list.length&&1==$("input[name="+id+"][cap='"+list[0]+"']").length){for(var parentNode=$("input[name="+id+"]").parent();parentNode[0].tagName&&"UL"!=parentNode[0].tagName;)parentNode=parentNode.parent();return void $(parentNode).addClass("hidden")}optionsArr=e}}else"select-one"==e.type&&(optionsArr=document.getElementById(id).options);if("range"==type)if(list[0]==list[1]&&(e.disabled=!0),optionsArr.length<=0){if("text"==e.type)$(e).attr("minValue",list[0]),$(e).attr("maxValue",list[1]),list[0]!=list[1]&&(e.title=$.lang.pub.range+list[0]+"-"+list[1],e.maxLength=list[1].toString().length);else if("ExposureIris"===id){for(var optionsHtml="",i=0,len=list.length;i<len;i++){var v=list[i],str=(v/100).toString();str.indexOf(".")<0&&(str+=".0"),optionsHtml+="<option value='"+v+"' cap='"+v+"'>F"+str+"</option>"}$("#ExposureIris").html(optionsHtml),$("#ExposureMinIris").html(optionsHtml),$("#ExposureMaxIris").html(optionsHtml)}}else{for(;parseInt(list[0])>parseInt($(optionsArr[0]).attr("cap"));)$(optionsArr[0]).remove();var flag=!1;for(i=0,len=optionsArr.length;i<len;)option=optionsArr[i],parseInt(list[1])<parseInt($(option).attr("cap"))&&(flag=!0),flag?($(option).remove(),len==optionsArr.length?i++:len=optionsArr.length):i++}else for(i=0,len=optionsArr.length;i<len;)option=optionsArr[i],0!=$(option).attr("cap")&&-1==Utils.isContainsElement($(option).attr("cap"),list)?("radio"==option.type&&$("label[for='"+option.id+"']").remove(),$(option).remove(),len==optionsArr.length?i++:len=optionsArr.length):i++}},initSlider:function(){var e,t=this;for(e in slidersMap){var a=slidersMap[e],i=new Slider(a.sliderId,a.barId,{onMove:function(){var e;bSpecifiedByInput||(e=Math.round(this.GetValue()),"LaserAngleText"==this.textId&&(e/=10,$("#LaserAngle").val(100*e)),$("#"+this.textId).val(e))},onDragStop:function(){var e;"IrisValueAutoManual"==this.textId&&(e=Number($("#IrisValueAutoManual").val())|Number($("#SmallestIRIS").val())<<16|Number($("#BiggestIRIS").val())<<24,$("#IrisValue").val(e)),t.submitF($("#"+this.textId).attr("apiType"))}});i.textId=e,i.MinValue=a.minValue,i.MaxValue=a.maxValue,a.sld=i}},setSliderValue:function(){var e,t,a;for(e in slidersMap)t=slidersMap[e].sld,a=isNaN(ImgMap[e])?128:Number(ImgMap[e]),"LaserAngleText"==e&&(a=isNaN(ImgMap[e])?Number(ImgMap.LaserAngle/100):Number(ImgMap[e]),$("#LaserAngleText").val(a),$("#LaserAngleItem").hasClass("hidden")||($("#LaserAngle").val(100*a),a*=10)),bSpecifiedByInput=!0,t.SetValue(a),bSpecifiedByInput=!1},onSliderChanged:function(e){var t=slidersMap[e.id],a="LaserAngleText"==e.id;if(a){if(!Utils.validPic_Num(e,t.minValue/10,t.maxValue/10,a))return void(e.value=ImgMap[e.id])}else if(!Utils.validPic_Num(e,t.minValue,t.maxValue))return void(e.value=ImgMap[e.id]);var i=Number(e.value);"LaserAngleText"==e.id&&(i=parseInt(10*i)/10,$("#LaserAngleText").val(i),$("#LaserAngle").val(10*i*10),i*=10),"IrisValueAutoManual"==e.id&&(a=Number($("#IrisValueAutoManual").val())|Number($("#SmallestIRIS").val())<<16|Number($("#BiggestIRIS").val())<<24,$("#IrisValue").val(a)),this.submitF($(e).attr("apiType")),bSpecifiedByInput=!0,t.sld.SetValue(i),bSpecifiedByInput=!1},setSliderEnable:function(e,t){var a=slidersMap[e].sliderId,i=slidersMap[e].barId;t?($("#"+a).removeClass().addClass("slider4"),$("#"+i).removeClass().addClass("bar3 bar4")):($("#"+a).removeClass().addClass("slider3"),$("#"+i).removeClass().addClass("bar3")),slidersMap[e].sld.setEnable(!t),$("#"+e).prop("disabled",t)},LensIfMode_change:function(){this.PIRISMode_onclick()},PIRISMode_onclick:function(){var e=$("#IrisMode");Capinfo.isSupportLenIfMode&&0<$("#LensIfMode").val()?($("#PIRISItem").addClass("hidden"),$("#ManualIrisValue").addClass("hidden"),$("#ManualDefaultValue").addClass("hidden"),$("#rangeIRIS").addClass("hidden"),$("#SmallestIRIS").prop("disabled",!0),$("#BiggestIRIS").prop("disabled",!0)):0<Capinfo.isSupportPIRIS&&0==top.ImageType&&$("#PIRISItem").removeClass("hidden"),0==e.val()?($("#ManualIrisValue").addClass("hidden"),$("#ManualDefaultValue").addClass("hidden"),$("#rangeIRIS").addClass("hidden"),$("#SmallestIRIS").prop("disabled",!0),$("#BiggestIRIS").prop("disabled",!0)):1==e.val()?($("#ManualIrisValue").removeClass("hidden"),$("#ManualDefaultValue").removeClass("hidden"),$("#rangeIRIS").addClass("hidden"),bSpecifiedByInput=!0,slidersMap.IrisValueAutoManual.sld.SetValue(parseInt($("#IrisValueAutoManual").val())),bSpecifiedByInput=!1):($("#ManualIrisValue").addClass("hidden"),$("#ManualDefaultValue").addClass("hidden"),$("#rangeIRIS").removeClass("hidden"),$("#SmallestIRIS").prop("disabled",!1),$("#BiggestIRIS").prop("disabled",!1))},DayNightMode_onclick:function(){var e=0!=$("input[name='DayNightMode']:checked").val();$("#DayNightSenseValue").prop("disabled",e),$("#DayNightSwitchTime").prop("disabled",e)},WhiteStandoff_change:function(){var e,t,a=$("#WhiteBalanceMode").val(),i=1!=a&&5!=a&&8!=a;i||(e={},t={},a=Utils.LAPI_GetCfgData(cmdMap.WhiteBalance,t),e.WhiteBalanceRedOffset=t.RedOffset,e.WhiteBalanceBlueOffset=t.BlueOffset,a&&($("#WhiteBalanceRedOffset").val(parseInt(e.WhiteBalanceRedOffset)),$("#WhiteBalanceBlueOffset").val(parseInt(e.WhiteBalanceBlueOffset)),bSpecifiedByInput=!0,slidersMap.WhiteBalanceRedOffset.sld.SetValue(parseInt(e.WhiteBalanceRedOffset)),slidersMap.WhiteBalanceBlueOffset.sld.SetValue(parseInt(e.WhiteBalanceBlueOffset)),bSpecifiedByInput=!1)),this.setSliderEnable("WhiteBalanceRedOffset",i),this.setSliderEnable("WhiteBalanceBlueOffset",i)},rangeStyleChange:function(e){$("#ExposureSlowShutter").hasClass("hidden")&&$("#ExposureFastShutter").hasClass("hidden")?$("#ExposureShutter").disableSelectbox(e):e?($("#ExposureShutter").hideSelectbox(),$("#rangeShutter").removeClass("hidden")):($("#ExposureShutter").showSelectbox(),$("#rangeShutter").addClass("hidden")),$("#ExposureMinIris").hasClass("hidden")&&$("#ExposureMaxIris").hasClass("hidden")?$("#ExposureIris").disableSelectbox(e):e?($("#ExposureIris").hideSelectbox(),$("#rangeIris").removeClass("hidden")):($("#ExposureIris").showSelectbox(),$("#rangeIris").addClass("hidden")),$("#ExposureMinGain").hasClass("hidden")&&$("#ExposureMaxGain").hasClass("hidden")?$("#ExposureGain").prop("disabled",e):e?($("#ExposureGain").addClass("hidden"),$("#rangeGain").removeClass("hidden")):($("#ExposureGain").removeClass("hidden"),$("#rangeGain").addClass("hidden"))},exposal_changePage:function(){var e=parseInt($("#ExposureMode").val()),t=$("#ExposureShutter"),a=$("#ExposureIris"),i=$("#ExposureGain"),n=1==e;this.rangeStyleChange(n),this.setSliderEnable("ExposureCompensate",n=7==e);var s=$("#MeteringModeSel");s.disableSelectbox(n);var r=$("#RefBrightness"),l=$("#HoldTime");switch(this.setSliderEnable("RefBrightness",n),this.setSliderEnable("HoldTime",n),r.attr("disabled",n),l.attr("disabled",n),this.setMeteringArea(),n=0!=e&&1!=e&&2!=e&&5!=e&&6!=e&&8!=e||0!=$("#DeFogMode").val(),$("#ExposureWDRMode").disableSelectbox(n),n?(this.setSliderEnable("ExposureRatioValue",n),this.setSliderEnable("OnSense",n),this.setSliderEnable("OffSense",n)):this.DWRMode_change(),n=3==e,$("input[name='EnableSlowShutter']").prop("disabled",n),n=n||0==$("input[name='EnableSlowShutter']:checked").val(),$("#MaxSlowShutter").disableSelectbox(n),1!=$("#sDiv").length||2!=e&&7!=e&&8!=e||(this.ExposureShutterType(),8==e?this.resetOptions("ExposureShutter",[Math.max(minShutter,50),250],"range"):$("#EnableSlowShutterItem").hasClass("hidden")?this.ResolveItems("ExposureShutterItem",$xml.find(capMap.ExposureShutterItem)[0]):this.enableMaxSlowShutter()),e){case 0:case 5:case 6:t.disableSelectbox(!0),a.disableSelectbox(!0),i.prop("disabled",!0);break;case 1:this.setSliderEnable("ExposureCompensate",!1),s.disableSelectbox(!1);break;case 2:case 8:t.disableSelectbox(!1),a.disableSelectbox(!0),i.prop("disabled",!0);break;case 3:t.disableSelectbox(!0),a.disableSelectbox(!1),i.prop("disabled",!0);break;case 4:t.disableSelectbox(!0),a.disableSelectbox(!0),i.prop("disabled",!1);break;case 7:t.disableSelectbox(!1),a.disableSelectbox(!1),i.prop("disabled",!1)}},DWRMode_change:function(){var e=$("#DeFogMode"),t=$("#ExposureWDRMode"),a=t.val();this.setSliderEnable("ExposureRatioValue",0==a),this.setSliderEnable("OnSense",2!=a),this.setSliderEnable("OffSense",2!=a),0!=e.val()&&0!=t.val()&&(t.get(0).selectedIndex=0,t.change()),e.prop("disabled",0!=t.val())},imageAdjust_change:function(){var e=$("#ImageAdjustEnable").val();this.setSliderEnable("ImageAdjustLevel",0==e)},RemoteAmp_change:function(){var e=$("#RemoteAmpEnable").val();this.setSliderEnable("RemoteAmpLevel",0==e)},enableMaxSlowShutter:function(){var e=$("input[name='EnableSlowShutter']:checked").val();if($("#MaxSlowShutter").prop("disabled",0==e),8!=parseInt($("#ExposureMode").val()))if(1==e)this.MaxSlowShutter_change();else{var t=$("#ExposureShutter"),a=$("#ExposureSlowShutter"),i=$("#ExposureFastShutter");if(shutterUnit.reciprocal_s==shutterType){for(;minShutter>t.find("option").first().val();)t.find("option").first().remove();for(;minShutter>a.find("option").first().val();)a.find("option").first().remove();for(;minShutter>i.find("option").first().val();)i.find("option").first().remove()}else t.attr("minValue",minShutter),e=t.attr("title"),e=minShutter+"-"+e.split("-")[1],t.attr("title",e),a.attr("minValue",minShutter),e=a.attr("title"),e=minShutter+"-"+e.split("-")[1],a.attr("title",e),i.attr("minValue",minShutter),e=i.attr("title"),e=minShutter+"-"+e.split("-")[1],i.attr("title",e)}},MaxSlowShutter_change:function(){var e=$("#MaxSlowShutter"),t=e.val(),a=$("#ExposureShutter"),i=$("#ExposureSlowShutter"),n=$("#ExposureFastShutter");if(8!=parseInt($("#ExposureMode").val()))if(shutterUnit.reciprocal_s==shutterType){for(var s="",r=e.find("option[value='"+t+"']");r.next().length;)s+="<option value='"+r.val()+"' cap='"+r.val()+"'>"+r.text()+"</option>",r=r.next();for(;minShutter>a.find("option").first().val();)a.find("option").first().remove();for(;minShutter>i.find("option").first().val();)i.find("option").first().remove();for(;minShutter>n.find("option").first().val();)n.find("option").first().remove();a.find("option").first().before(s),parseInt(a.find("option").first().val())>parseInt(ImgMap.ExposureShutter)&&(ImgMap.ExposureShutter=a.find("option").first().val()),a.val(ImgMap.ExposureShutter),i.find("option").first().before(s),i.val(ImgMap.ExposureSlowShutter),n.find("option").first().before(s),n.val(ImgMap.ExposureFastShutter)}else a.attr("minValue",t),e=t+"-"+(e=a.attr("title")).split("-")[1],a.attr("title",e),a.val()<t&&a.val(t),i.attr("minValue",t),e=t+"-"+(e=i.attr("title")).split("-")[1],i.attr("title",e),i.val()<t&&i.val(t),n.attr("minValue",t),e=t+"-"+(e=n.attr("title")).split("-")[1],n.attr("title",e),n.val()<t&&n.val(t)},IrCtrlMode_change:function(){var e=$("#IrCtrlMode").val(),t=3!=e&&7!=e;$("#NearIrLed").prop("disabled",t),$("#MiddleIrLed").prop("disabled",t),$("#FarIrLed").prop("disabled",t),$("#Far2IrLed").prop("disabled",t),this.setSliderEnable("LaserAngleText",t);t=$xml.find("Image Video IrCtrl Mode").text().split(",");-1<Utils.isContainsElement("6",t)&&(5==e?$("#BlackWhiteMode_Auto").prop("checked",!0):3!=e&&7!=e||($("#BlackWhiteMode_Auto").prop("disabled",!0),$("#BlackWhiteMode_Color").prop("checked",!0)))},parserIrItem:function(){var e,t=Number($("#LightMode").val()),a=[0,1e3],i=["NearIrLed","MiddleIrLed","FarIrLed","Far2IrLed"],n="Video LedCtrl "+{0:"NoneLedCtrl",1:"WhiteCtrl",2:"IrCtrl",3:"LaserCtrl",4:"GunIrCtrl"}[t],s=$("#NearIrLedItem"),r=$("#MiddleIrLedItem"),l=$("#FarIrLedItem"),o=$("#LaserAngleItem"),d=$("#Far2IrLedItem"),p=$("#IrCtrlMode"),u=$xml.find(n+" Mode").text().split(","),m=$xml.find(n+" DefaultMode").text(),h=$xml.find(n+" LedNum"),h=0<h.length?Number(h.text()):0;for(s.addClass("hidden"),s.children().first().text($.lang.pub.nearIrLed),r.addClass("hidden"),r.children().first().text($.lang.pub.middleIrLed),l.addClass("hidden"),l.children().first().text($.lang.pub.farIrLed),o.addClass("hidden"),d.addClass("hidden"),d.children().first().text($.lang.pub.far2IrLed),e=0;e<4;e++){var c=$xml.find(n+" LedLevel"+e+" Range");0<c.length&&($("#"+i[e]+"Item").removeClass("hidden"),a=c.text().split(","),Utils.parseCapOptions(i[e],a,"range"))}3==t?(l.children().first().text($.lang.pub.laserLed),0<$xml.find(n+" LaserAnger").length&&(o.removeClass("hidden"),a=$xml.find(n+" LaserAnger Range").text().split(","),slidersMap.LaserAngleText.minValue=Number(a[0])/10,slidersMap.LaserAngleText.maxValue=Number(a[1])/10,slidersMap.LaserAngleText.sld.MinValue=Number(a[0])/10,slidersMap.LaserAngleText.sld.MaxValue=Number(a[1])/10,this.setSliderValue())):1==h?$("ul[id$='IrLedItem'][class!='hidden']").children().first().text($.lang.pub.irLed):l.hasClass("hidden")||d.hasClass("hidden")?d.hasClass("hidden")||$("#far2IrLedLI").text($.lang.pub.farIrLed):$("#farIrLedLI").text($.lang.pub.far1IrLed),p.html(irCrlModeOptions_bak),Utils.parseCapOptions("IrCtrlMode",u,"mode"),p.val(m-1),Utils.initLang()},lightMode_change:function(){var e=0==$("#LightMode").val();$("#IrCtrlModeItem").hasClass("hidden")||($("#IrCtrlMode").prop("disabled",e),e?($("#NearIrLed").prop("disabled",e),$("#MiddleIrLed").prop("disabled",e),$("#FarIrLed").prop("disabled",e),$("#Far2IrLed").prop("disabled",e),$("input[name='DayNightMode']").prop("disabled",!e),this.DayNightMode_onclick()):this.IrCtrlMode_change())},getImageDevCap:function(){var e=Utils.loadXML("/device_cap.xml?t="+(new Date).getTime());e&&($xml=$(e))},ExposureShutterType:function(){var e=$("#ExposureShutter"),t=e.val(),a=e.find("option");0<a.length?(e.empty(),e.append(ShutterOption),0<e.find("option[value='"+t+"']").length?e.val(t):a.first().attr("selected","selected")):t>=e.attr("min")&&t<=e.attr("max")?e.val(t):e.val(e.attr("min"))},changeImageType:function(){top.ImageType=$("input[name='ImageType']:checked").val(),isShowVideo=!0,Menu.loadMenu("/page/common/img_config.52c37482.htm","imgConfigTab")},initAreaDrawObjData:function(){var e={};(DrawObjMap={})[DrawType.RECT]=[],e.Left=100*Number(ImgMap.TopLeftX),e.Top=100*Number(ImgMap.TopLeftY),e.Right=100*Number(ImgMap.BotRightX),e.Bottom=100*Number(ImgMap.BotRightY),e.LineColor=Utils.getDrawObjColor("00FF00"),e.LineWidth=2,DrawObjMap[DrawType.RECT].push(e),Utils.initDrawObj(DrawObjMap,this.setMeteringArea)},restoreDefaultParam:function(){var e;confirm($.lang.tip.tipResDefaultParam)&&(e=Number($("input[name='ImageType']:checked").val()),Utils.LAPI_SetCfgData(LAPI_URL.ImageParamReset,{Type:e})?(this.initData(),this.initAreaDrawObjData()):alert($.lang.tip.tipResDefParamFailed))},setRenderScale:function(){Video.setRenderScale(StreamType.LIVE,0)},setMeteringArea:function(){var e=0,t=$("#MeteringModeSel"),a=t.val();$("#PlanEnable").is(":checked")||$("#MeteringModeItem").hasClass("hidden")||t.prop("disabled")||1!=a&&5!=a||(e=1),Utils.showHiddenArea(DrawType.RECT,0,e),1==e&&Utils.selectDrawObj(DrawType.RECT,0)},setInputValue:function(e){var t;return Utils.validPic_Num(e,parseInt($(e).attr("minValue")),parseInt($(e).attr("maxValue")))?!(-1<e.id.indexOf("Shutter")&&!this.validateRange(e.id,"shutter"))&&(!(-1<e.id.indexOf("Gain")&&!this.validateRange(e.id,"gain"))&&(!(-1<e.id.indexOf("IRIS")&&!this.validateRange(e.id,"IRIS"))&&("SmallestIRIS"!=e.id&&"BiggestIRIS"!=e.id||(t=Number($("#IrisValueAutoManual").val())|Number($("#SmallestIRIS").val())<<16|Number($("#BiggestIRIS").val())<<24,$("#IrisValue").val(t)),this.submitF($(e).attr("apiType"))))):(e.value=undefined==ImgMap[e.id]?parseInt(e.minValue):ImgMap[e.id],!1)},disablePage:function(){for(var e in Utils.disableAll(),slidersMap)this.setSliderEnable(e,!0)},repareData:function(){var e=ImgMap.DayNightSenseValue;2==e||3==e?ImgMap.DayNightSenseValue=1:4==e||6==e?ImgMap.DayNightSenseValue=5:7!=e&&8!=e||(ImgMap.DayNightSenseValue=9),0==ImgMap.TopLeftX&&0==ImgMap.TopLeftY&&0==ImgMap.BotRightX&&0==ImgMap.BotRightY&&(ImgMap.TopLeftX=25,ImgMap.TopLeftY=25,ImgMap.BotRightX=75,ImgMap.BotRightY=75)},resetForm:function(){this.repareData(),$("#EnableSlowShutterItem").hasClass("hidden")||($("input[name='EnableSlowShutter'][value='"+ImgMap.EnableSlowShutter+"']").prop("checked",!0),$("#MaxSlowShutter").val(ImgMap.MaxSlowShutter),this.enableMaxSlowShutter());var e=$("#MeteringModeItem"),t=$("#ExposureWDRModeItem"),a=$("#ExposureWDRSensibilityItem"),i=$("#HLCRatio_temp");7==currentSceneType||12==currentSceneType?(e.hasClass("hidden")||e.css("display","none"),t.hasClass("hidden")||t.css("display","none"),a.hasClass("hidden")||a.css("display","none"),12==currentSceneType?i.text($.lang.pub.HLCRatio_ex):i.text($.lang.pub.HLCRatio),$("#HLCRatioSlider").removeClass("hidden")):(e.hasClass("hidden")||e.css("display",""),t.hasClass("hidden")||t.css("display",""),a.hasClass("hidden")||a.css("display",""),$("#HLCRatioSlider").addClass("hidden"),ImgMap.MeteringModeSel=ImgMap.MeteringMode),$("#ExposureGainItem").hasClass("hidden")||this.ResolveItems("ExposureGainItem",$xml.find(capMap.ExposureGainItem)[0]);t=$("#LightModeItem");t.hasClass("hidden")||($("#LightMode").val(ImgMap.LightMode),this.parserIrItem(),$("#LaserAngleItem").hasClass("hidden")||(ImgMap.LaserAngleText=ImgMap.LaserAngle/100)),dataMap_bak=Utils.objectClone(ImgMap),Utils.cfgToForm(ImgMap,"frmSetup"),this.setSliderValue(),$("#WhiteBalanceModeItem").hasClass("hidden")||this.WhiteStandoff_change();a=$("#DayNightModeUL");a.hasClass("hidden")||a.parent().hasClass("unit hidden")||this.DayNightMode_onclick(),$("#ExposureWDRModeUL").hasClass("hidden")||this.DWRMode_change(),t.hasClass("hidden")||this.lightMode_change(),$("#DeFogItem").hasClass("hidden")||this.DeFog_change(),$("#ImageAdjustItem").hasClass("hidden")||this.imageAdjust_change(),$("#RemoteAmpItem").hasClass("hidden")||this.RemoteAmp_change(),$("#StableModeItem").hasClass("hidden")||this.EIS_click(),$("#PIRISItem").hasClass("hidden")||this.PIRISMode_onclick(),$("#ExposureModeItem").hasClass("hidden")||this.exposal_changePage(),$("#MirrorModeItem").hasClass("hidden")?this.setMeteringArea():this.MirrorMode_changePage(),$("#lensModeUL").hasClass("hidden")||this.LensIfMode_change(),4==$("#MeteringModeSel").val()?($("#RefBrightnessItem").removeClass("hidden"),$("#HoldTimeItem").removeClass("hidden")):($("#RefBrightnessItem").addClass("hidden"),$("#HoldTimeItem").addClass("hidden"))},MirrorMode_changePage:function(){var e=Video.StreamInfoChangeList[StreamID.MAIN_VIDEO],t=$("#MirrorMode");4==t.val()||5==t.val()?(Video.videoWidth=Number(e.Height),Video.videoHeight=Number(e.Width)):(Video.videoWidth=Number(e.Width),Video.videoHeight=Number(e.Height)),Video.calVideoRealPos(),this.setRenderScale()},DeFog_change:function(){var e=$("#DeFogMode"),t=0==e.val();this.setSliderEnable("DeFogLevel",t);t=$("#ExposureWDRMode");0!=e.val()&&0!=t.val()&&(e.get(0).selectedIndex=0,e.change()),t.prop("disabled",0!=e.val())},EIS_click:function(){var e=1==$("#StableMode").val();$("#Rate").prop("disabled",!e)}});return new mainClass}(jQuery),Frame.currentNameSpace=Config.Image;