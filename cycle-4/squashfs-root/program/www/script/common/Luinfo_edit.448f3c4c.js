Config.RouterInfo=function(I){var p,d=Config.Router.LuMap,t={},i=null,h=!1,e=Config.Router.type;return new(Class.extend({init:function(){Utils.beforeDataLoad(),this.initPage(),Utils.initLang(),this.initEvent(),this.initData(),this.initValidator(),Utils.afterDataLoad()},initPage:function(){},initData:function(){t=Utils.objectClone(d),Utils.LAPI_CfgToForm("frmSetup",d)},initEvent:function(){var t=this;I("#Destination").bind("blur",function(){t.changeTxt("Destination")}),I("#Netmask").bind("blur",function(){t.changeTxt("Netmask")}),I("#Gateway").bind("blur",function(){t.changeTxt("Gateway")})},submitWinData:function(){if(i.form()){if(0==e)d.ID=-1,d.Enabled=1,d.InterfaceID=1,d.Metric=0,d.Destination=I("#Destination").val(),d.Netmask=I("#Netmask").val(),d.Gateway=I("#Gateway").val(),this.checkIsNotEqual(0);else{if(!!Utils.isObjectEquals(d,t))return void Frame.showMsg(!0,I.lang.tip.tipAnyChangeInfo,0);this.checkIsNotEqual(1)}h&&(Config.Router.LuDataView&&Config.Router.LuDataView.refresh(),Utils.closeWin())}},release:function(){Frame.openWinNameSpace="",delete Config.RouterInfo},initValidator:function(){var e=this;I("#Destination").attr("tip",I.lang.tip.tipIPPartInfo),I("#Netmask").attr("tip",I.lang.tip.tipSubnetMaskInfo),I("#Gateway").attr("tip",I.lang.tip.tipGateway),I.validator.addMethod("isIPAddress",function(t){return Utils.isIPAddress(t)},I.lang.tip.tipIPErr),I.validator.addMethod("checkIP1To223",function(t){return Utils.checkIP1To223(t)},I.lang.tip.tipIPRangeErr),I.validator.addMethod("checkSubnetMask",function(t){return e.checkSubnetMask(t)},I.lang.tip.tipSubnetMaskErr),I.validator.addMethod("checkIPPartInfoLast",function(t){return e.checkIPPartInfoLast(t)},I.lang.tip.tipIPPartLastErr),(i=I("#frmSetup").validate({focusInvalid:!1,errorElement:"span",errorPlacement:function(t,e){Utils.showJqueryErr(t,e,"span","frmSetup")},success:function(){},rules:{Destination:{required:!0,isIPAddress:"",checkIP1To223:"",checkIPPartInfoLast:""},Netmask:{required:!0,isIPAddress:"",checkSubnetMask:""},Gateway:{required:!0,isIPAddress:"",checkIP1To223:""}}})).init()},checkIsNotEqual:function(t){p=Config.Router.jsonMap.Nums;for(var e=[],i=[],n=!1,a=d.Destination.split("."),o=d.Netmask.split("."),s=d.Gateway.split("."),r=0;r<p;r++)if(1!=t||r!=Config.Router.LuDataView.currectRow){for(var u=Config.Router.jsonMap.RouteInfos[r].Destination.split("."),f=Config.Router.jsonMap.RouteInfos[r].Netmask.split("."),c=Config.Router.jsonMap.RouteInfos[r].Gateway.split("."),l=0;l<a.length;l++)e.push(a[l]&o[l]),i.push(u[l]&f[l]);if(n=e[0]==i[0]&&e[1]==i[1]&&e[2]==i[2]&&e[3]==i[3]&&s[0]==c[0]&&s[1]==c[1]&&s[2]==c[2]&&s[3]==c[3],e=[],i=[],n){Frame.showMsg(!1,I.lang.tip.tipRouteExist);break}}return n||(h=0==t?Utils.LAPI_CreateCfgData(LAPI_URL.Routes+"/RouteInfos",d):Utils.LAPI_SetCfgData(LAPI_URL.Routes+"/RouteInfos/"+d.ID,d),Frame.showMsg(h)),h},checkSubnetMask:function(t){if(!Utils.isIPAddress(t))return!1;var e=t.split("."),i=parseInt(e[0]),n=parseInt(e[1]),t=parseInt(e[2]),e=parseInt(e[3]);return!(-1<(Utils.format10To2(i)+Utils.format10To2(n)+Utils.format10To2(t)+Utils.format10To2(e)).indexOf("01"))&&(0!=i+n+t+e&&1020!=i+n+t+e)},checkIPPartInfoLast:function(t){if(!Utils.isIPAddress(t))return!1;t=t.split(".")[3];return 0==t&&0==t},changeTxt:function(t){d[t]=I("#"+t).val()}}))}(jQuery),Frame.openWinNameSpace=Config.RouterInfo;