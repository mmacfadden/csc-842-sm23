Config.OperateLog=function(l){var o,u,a=1e3,t=2e3,r=1e3,n=1001,i=1002,g=1003,s=1004,c=1005,b=1006,p=1007,f=1008,d=1009,m=1010,L=1011,P=2e3,k=2001,v=2002,T=2003,C=2004,h=2005,D=2006,N=2007,I=2008,w=2009,y=2010,M=2011,U={Limit:10,Offset:0},E={},S=null,V=[{fieldId:"rowNum",fieldType:"RowNum"},{fieldId:"MainType"},{fieldId:"Day"},{fieldId:"Time"},{fieldId:"UserName"},{fieldId:"UserIP"},{fieldId:"SubType"}];return new(Class.extend({init:function(){Utils.beforeDataLoad(),Utils.initLang(),this.initEvent(),this.initValidator(),this.initDataView(),Utils.afterDataLoad()},initPage:function(){},initData:function(){var e=Number(l("#currentPage").val()),a=[];if(E={},U.Offset=10*(e-1),!Utils.LAPI_CreateCfgData(LAPI_URL.Logs,U,!1,this.logCallBack))return Frame.showMsg(!1,l.lang.tip.tipGetCfgFail),void Utils.disableAll();for(var t=0;t<E.Nums;t++){for(var r={},n=0,i=V.length;n<i;n++){var g=V[n].fieldId;undefined!=E.Logs[t][g]&&"Day"!=g?"Time"==g?(this.getLocalTime(E.Logs[t].Time),r[g]=u):r[g]=E.Logs[t][g]:"Day"==g&&(this.getLocalTime(E.Logs[t].Time),r[g]=o)}a.push(r)}e=parseInt(E.Total/U.Limit)+1;return l("#totalPage").text(e),a},initEvent:function(){var e=this;l("#prePage").bind("click",function(){e.getPrePage()}),l("#nextPage").bind("click",function(){e.getNextPage()}),l("#currentPage").change(function(){1==e.isCurrPageValid()&&S.refresh()})},submitF:function(){},release:function(){Frame.currentNameSpace="",delete Config.OperateLog},initValidator:function(){var e=this;l("#currentPage").attr("tip",l.lang.tip.tipPagerCurrPageErr),l.validator.addMethod("validCurrentPage",function(){return e.isCurrPageValid()},l.lang.tip.tipPagerCurrPageErr),l("#frmSetup").validate({focusInvalid:!1,errorElement:"span",errorPlacement:function(e,a){Utils.showJqueryErr(e,a,"div")},success:function(){},rules:{currentPage:{integer:!0,required:!0,validCurrentPage:""}}}).init()},isCurrPageValid:function(){var e=Number(l("#currentPage").val());return Number(l("#totalPage").text())<e||e<1?0:1},logCallBack:function(e,a){e==ResultCode.RESULT_CODE_SUCCEED&&(E=a.Data)},getLocalTime:function(e){var a=new Date(1e3*parseInt(e)),t=a.getFullYear(),r=a.getMonth()+1,n=a.getDate(),i=a.getHours(),e=a.getMinutes(),a=a.getSeconds();o=t+"-"+(r=r<10?"0"+r:r)+"-"+(n=n<10?"0"+n:n),u=(i=i<10?"0"+i:i)+":"+(e=e<10?"0"+e:e)+":"+(a=a<10?"0"+a:a)},getNextPage:function(){var e=l("#currentPage"),a=Number(e.val());Number(l("#totalPage").text())<=a||(e.val(a+1),S.refresh())},getPrePage:function(){var e=l("#currentPage"),a=Number(e.val());a<=1||(e.val(a-1),S.refresh())},initDataView:function(){var e=this;(S=new TableView("dataview_tbody",function(){return e.initData()},V)).setFields({MainType:function(e){return a==e&&(e=l.lang.pub.logTypeOP),e=t==e?l.lang.pub.logTypeALM:e},SubType:function(e){switch(e){case r:e=l.lang.pub.logTypeOP;break;case n:e=l.lang.pub.login;break;case i:e=l.lang.pub.operateLogReboot;break;case g:e=l.lang.pub.restoreLaser;break;case s:e=l.lang.pub.operateLogNetwork;break;case c:e=l.lang.pub.operateLogPort;break;case b:e=l.lang.pub.operateLogDNS;break;case p:e=l.lang.pub.operateLogUNP;break;case f:e=l.lang.pub.operateLogManagement;break;case d:e=l.lang.pub.operateLogNTP;break;case m:e=l.lang.pub.operateLogHTTP;break;case L:e=l.lang.pub.operateLogBM;break;case P:e=l.lang.pub.logTypeALM;break;case k:e=l.lang.pub.almLogHighTem;break;case v:e=l.lang.pub.almLogLowTem;break;case T:e=l.lang.pub.almLogTemClear;break;case C:e=l.lang.pub.almLogMotionDet;break;case h:e=l.lang.pub.almLogMotionClear;break;case D:e=l.lang.pub.almLogTamperDet;break;case N:e=l.lang.pub.almLogTamperClear;break;case I:e=l.lang.pub.almLogInputDet;break;case w:e=l.lang.pub.almLogInputClear;break;case y:e=l.lang.pub.almLogAudioDet;break;case M:e=l.lang.pub.almLogAudioClear;break;default:e=l.lang.pub.other}return e}}),S.createDataView()}}))}(jQuery),Frame.currentNameSpace=Config.OperateLog;