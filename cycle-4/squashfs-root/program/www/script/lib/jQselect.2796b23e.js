var console;jQuery.fn.extend({selectbox:function(t){return this.each(function(){new jQuery.SelectBox(this,t)})},disableSelectbox:function(t){$(this).attr("disabled",t),0<$("#"+$(this).attr("id")+"_input").length&&$("#"+$(this).attr("id")+"_input").attr("disabled",t)},hideSelectbox:function(){0<$("#"+$(this).attr("id")+"_input").length?($("#"+$(this).attr("id")+"_input").css("display","none"),$("#"+$(this).attr("id")+"_a").css("display","none")):$(this).css("display","none")},showSelectbox:function(){0<$("#"+$(this).attr("id")+"_input").length?($("#"+$(this).attr("id")+"_input").css("display",""),$("#"+$(this).attr("id")+"_a").css("display","")):$(this).css("display","")},setSelectboxValue:function(t){$(this).val(t);var e=$(this).attr("id")+"_input";$(this).children("option").each(function(){$(this).is(":selected")&&$("#"+e).val($(this).html())})}}),window.console||(console={log:function(t){}}),jQuery.SelectBox=function(t,e){var i=e||{};i.inputClass=i.inputClass||"selectbox",i.imgClass=i.imgClass||"selectImg",i.containerClass=i.containerClass||"selectbox-wrapper",i.hoverClass=i.hoverClass||"current",i.currentClass=i.selectedClass||"selected",i.debug=i.debug||!1;var s,a,n=t.id,l=0,o=!1,r=0,c=$(t),d=function(t){var e=document.createElement("input"),e=$(e);e.attr("id",n+"_input"),e.attr("type","text"),e.addClass(t.inputClass),e.attr("style",c.attr("style")),0<c.attr("offsetWidth")&&e.css("width",c.attr("offsetWidth"));return e.attr("autocomplete","off"),e.attr("readonly","readonly"),e.attr("disabled",c.attr("disabled")),e.attr("tabIndex",c.attr("tabindex")),e}(i),t=(s=i,a=document.createElement("a"),(a=$(a)).attr("id",n+"_a"),a.addClass(s.imgClass),a.attr("tabIndex",c.attr("tabindex")),a),u=function(t){var e=document.createElement("div");(u=$(e)).attr("id",n+"_container"),u.addClass(t.containerClass),u.attr("style",c.attr("style")),0<c.attr("offsetWidth")&&u.css("width",c.attr("offsetWidth"));return u}(i);function h(){r=0,u.hide()}function f(t){var e=$("li",u);e&&0!=e.length&&((l+=t)<0?l=e.size()-1:l>=e.size()&&(l=0),function(t,e){e=$(t[e]).get(0),t=u.get(0);e.offsetTop+e.offsetHeight>t.scrollTop+t.clientHeight?t.scrollTop=e.offsetTop+e.offsetHeight-t.clientHeight:e.offsetTop<t.scrollTop&&(t.scrollTop=e.offsetTop)}(e,l),e.removeClass(i.hoverClass),$(e[l]).addClass(i.hoverClass))}c.hide().before(d).before(t).after(u),u.append(function(e){var s=document.createElement("ul");return c.children("option").each(function(){var t=document.createElement("li");t.setAttribute("id",e+"_"+$(this).val()),t.innerHTML=$(this).html(),$(this).is(":selected")&&(d.val($(this).html()),$(t).addClass(i.currentClass)),s.appendChild(t),$(t).mouseover(function(t){r=1,i.debug&&console.log("over on : "+this.id),jQuery(t.target,u).addClass(i.hoverClass)}).mouseout(function(t){r=-1,i.debug&&console.log("out on : "+this.id),jQuery(t.target,u).removeClass(i.hoverClass)}).click(function(t){var e,s;$("li."+i.hoverClass,u).get(0);i.debug&&console.log("click on :"+this.id),$("#"+n+"_container li."+i.currentClass).removeClass(i.currentClass),$(this).addClass(i.currentClass),e=$("li."+i.currentClass,u).get(0),s=(s=(""+e.id).split("_"))[s.length-1],c.val(s),d.val($(e).html()),c.get(0).blur(),h(),c.change()})}),s}(d.attr("id"))).hide(),d.click(function(){o||u.toggle()}).focus(function(){u.not(":visible")&&(o=!0,u.show())}).keydown(function(t){switch(t.keyCode){case 38:t.preventDefault(),f(-1);break;case 40:t.preventDefault(),f(1);break;case 13:t.preventDefault(),$("li."+i.hoverClass).trigger("click");break;case 27:h()}}).blur(function(){u.is(":visible")&&0<r?i.debug&&console.log("container visible and has focus"):!$.browser.msie&&!$.browser.safari||-1==document.activeElement.getAttribute("id").indexOf("_container")?h():d.focus()}),t.click(function(){d.is(":disabled")||d.focus()})};